<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>诸子百家</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://uteric.github.io/"/>
  <updated>2020-05-13T03:36:27.000Z</updated>
  <id>http://uteric.github.io/</id>
  
  <author>
    <name>括囊无誉</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>nvm版本切换</title>
    <link href="http://uteric.github.io/GIT/nvm_version/"/>
    <id>http://uteric.github.io/GIT/nvm_version/</id>
    <published>2020-05-13T03:36:27.000Z</published>
    <updated>2020-05-13T03:36:27.000Z</updated>
    
    <content type="html"><![CDATA[<p>1、查看当前nvm版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm ls</span><br></pre></td></tr></table></figure><p>2、安装指定版本，如安装12.5.0</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm install 12.5.0</span><br></pre></td></tr></table></figure><p>3、使用指定版本，如使用12.5.0</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm use 12.5.0</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;1、查看当前nvm版本&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;co
      
    
    </summary>
    
      <category term="编程语言" scheme="http://uteric.github.io/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="nvm" scheme="http://uteric.github.io/tags/nvm/"/>
    
  </entry>
  
  <entry>
    <title>使用R绘制生存曲线</title>
    <link href="http://uteric.github.io/R/R_survival_curve/"/>
    <id>http://uteric.github.io/R/R_survival_curve/</id>
    <published>2020-05-13T00:08:08.000Z</published>
    <updated>2020-05-13T00:08:08.000Z</updated>
    
    <content type="html"><![CDATA[<p>一、加载程序包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">library(survival)</span><br><span class="line">library(ggplot2)</span><br><span class="line">library(survminer)</span><br><span class="line">library(dplyr)</span><br></pre></td></tr></table></figure><p>二、加载数据并绘图</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data &lt;- read.delim(<span class="string">'clipboard'</span>,header = T)</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">head(data)</span><br><span class="line">       Patient Days Status Expression Group</span><br><span class="line">1 TCGA-B0-5702 2172  Alive     383.07   Low</span><br><span class="line">2 TCGA-B0-4696  866   Dead     810.35   Low</span><br><span class="line">3 TCGA-B0-4698   42   Dead     849.64   Low</span><br><span class="line">4 TCGA-CJ-4642 3205  Alive    1153.28   Low</span><br><span class="line">5 TCGA-BP-5185 1132  Alive    1197.89   Low</span><br><span class="line">6 TCGA-BP-4337    2   Dead    1223.26   Low</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">table(data<span class="variable">$Status</span>)</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Alive  Dead </span><br><span class="line">  349   173</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">table(data<span class="variable">$Group</span>,data<span class="variable">$Status</span>)</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">      Alive Dead</span><br><span class="line">High   198   63</span><br><span class="line">Low    151  110</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">my.surv &lt;- Surv(data<span class="variable">$Days</span>,data<span class="variable">$Status</span>==<span class="string">'Dead'</span>)</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fit &lt;- survfit(my.surv~data<span class="variable">$Group</span>)</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Call: survfit(formula = my.surv ~ data<span class="variable">$Group</span>)</span><br><span class="line"></span><br><span class="line">                n events median 0.95LCL 0.95UCL</span><br><span class="line">data<span class="variable">$Group</span>=High 261     63     NA    2830      NA</span><br><span class="line">data<span class="variable">$Group</span>=Low  261    110   1980    1620    2601</span><br></pre></td></tr></table></figure><p>绘制最基本的生存曲线<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plot(fit,col=c(<span class="string">"red"</span>,<span class="string">"blue"</span>))</span><br></pre></td></tr></table></figure></p><p><img src="/images/R/surv01.png" alt></p><p>优化生存曲线</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">plot(kmfit2,col=c(<span class="string">"red"</span>,<span class="string">"blue"</span>),axes=F,xlab=<span class="string">"Days"</span>,ylab=<span class="string">"Survival"</span>,lwd=2,main=<span class="string">"Kidney Renal Clear Cell Carcinoma"</span>)</span><br><span class="line">axis(2,at=c(0,0.5,1),labels=c(0,0.5,1),pos=0,las=2)</span><br><span class="line">axis(1,at=c(0,1000,2000,3000,4000,5000),labels=c(0,1000,2000,3000,4000,5000),pos=0)</span><br><span class="line">segments(2190,0,2190,0.5,lty=2,col=<span class="string">"red"</span>)</span><br><span class="line">segments(0,0.5,3615,0.5,lty=2,col=<span class="string">"grey"</span>)</span><br><span class="line">segments(3615,0,3615,0.5,lty=2,col=<span class="string">"blue"</span>)</span><br><span class="line">text(1500,0.95,<span class="string">"p=0.000598"</span>,cex=0.8)</span><br><span class="line">legend(<span class="string">"topright"</span>,c(<span class="string">"High"</span>,<span class="string">"Low"</span>),fill=c(<span class="string">"red"</span>,<span class="string">"blue"</span>),cex=0.9,bty=<span class="string">"n"</span>,box.lwd=0.2)</span><br></pre></td></tr></table></figure><p><img src="/images/R/surv02.png" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;一、加载程序包&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;
      
    
    </summary>
    
      <category term="编程语言" scheme="http://uteric.github.io/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="生存曲线" scheme="http://uteric.github.io/tags/%E7%94%9F%E5%AD%98%E6%9B%B2%E7%BA%BF/"/>
    
  </entry>
  
  <entry>
    <title>R可视化-棒棒糖图</title>
    <link href="http://uteric.github.io/R/R_visualize_lollipop/"/>
    <id>http://uteric.github.io/R/R_visualize_lollipop/</id>
    <published>2020-02-12T04:51:40.000Z</published>
    <updated>2020-02-12T04:51:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>棒棒糖图，介于柱形图与散点图之间，之所以这么说，是因为它能以柱形图与散点图的数据作图，即两列定量变量（数字），或一列定量变量（数字）一列分类变量（字符串）；</p><p>有趣的是，棒棒糖图其实不是由一个函数绘制的，而是由两个函数叠加成的，即使用geom_point()绘制点，使用geom_segment()绘制线；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">var1 &lt;- LETTERS[1:20]</span><br><span class="line">var2 &lt;- runif(20,min=2,max=20)</span><br><span class="line">var3 &lt;- runif(20,min=1,max=5)</span><br><span class="line">var4 &lt;- c(rep(<span class="string">"classI"</span>,10),rep(<span class="string">"classII"</span>,10))</span><br><span class="line">data &lt;- data.frame(var1,var2,var3,var4)</span><br><span class="line">&gt; data</span><br><span class="line">var1      var2     var3    var4</span><br><span class="line">1     A  6.266182 3.434602  classI</span><br><span class="line">2     B 12.758686 3.288259  classI</span><br><span class="line">3     C 10.340497 1.924543  classI</span><br><span class="line">4     D  6.177109 2.720639  classI</span><br><span class="line">5     E 16.549641 2.546006  classI</span><br><span class="line">6     F  2.460816 1.659354  classI</span><br><span class="line">7     G  9.812373 2.556147  classI</span><br><span class="line">8     H  3.367085 3.515422  classI</span><br><span class="line">9     I  6.891384 1.811289  classI</span><br><span class="line">10    J  8.513522 2.264906  classI</span><br><span class="line">11    K 16.506077 1.968184 classII</span><br><span class="line">12    L  2.638983 4.739859 classII</span><br><span class="line">13    M 19.169797 3.854552 classII</span><br><span class="line">14    N 12.261985 2.441648 classII</span><br><span class="line">15    O 16.296435 4.560705 classII</span><br><span class="line">16    P 13.804297 2.391673 classII</span><br><span class="line">17    Q  2.207188 1.330717 classII</span><br><span class="line">18    R 13.063605 3.532234 classII</span><br><span class="line">19    S 17.489978 4.359878 classII</span><br><span class="line">20    T 15.389995 4.394447 classII</span><br></pre></td></tr></table></figure><p>1、开始正式作图</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">plolli &lt;- ggplot(data,aes(x=var1,y=var2))+</span><br><span class="line">geom_point()+</span><br><span class="line">geom_segment(aes(x=var1,xend=var1,y=0,yend=var2))</span><br><span class="line">plolli</span><br><span class="line">ggsave(plolli,filename=<span class="string">"lollipop1.png"</span>,width=12,height=9)</span><br></pre></td></tr></table></figure><p><img src="/images/R/lollipop1.png" alt></p><p>着重解释一下geom_segment()函数的用法，如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">geom_segment(x,y,xend,yend,color,size,linetype,alpha)</span><br></pre></td></tr></table></figure><p>其中，x=xstart,y=ystart,xend=xend,yend=yend，表示x与y的起始位置与终止位置；</p><p>2、优化散点的大小，形状，颜色，填充，透明度；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">plolli &lt;- ggplot(data,aes(x=var1,y=var2))+</span><br><span class="line">geom_point(color=<span class="string">"black"</span>,</span><br><span class="line">fill=<span class="string">"69b3a2"</span>,</span><br><span class="line">size=3,</span><br><span class="line">shape=22,</span><br><span class="line">alpha=0.8)+</span><br><span class="line">geom_segment(aes(x=var1,xend=var1,y=0,yend=var2))</span><br><span class="line">plolli</span><br></pre></td></tr></table></figure><p><img src="/images/R/lollipop2.png" alt></p><p>3、优化线条的大小，线型，颜色，透明度，其中，linetype数值为[0:6]，0 = blank, 1 = solid, 2 = dashed, 3 = dotted, 4 = dotdash, 5 = longdash, 6 = twodash；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">plolli &lt;- ggplot(data,aes(x=var1,y=var2))+</span><br><span class="line">geom_point(color=<span class="string">"black"</span>,</span><br><span class="line">fill=<span class="string">"69b3a2"</span>,</span><br><span class="line">size=4,</span><br><span class="line">shape=22,</span><br><span class="line">alpha=0.8)+</span><br><span class="line">geom_segment(aes(x=var1,xend=var1,y=0,yend=var2),</span><br><span class="line">color=<span class="string">"black"</span>,</span><br><span class="line">alpha=0.4,</span><br><span class="line">size=1.2,</span><br><span class="line">linetype=3)</span><br><span class="line">plolli</span><br></pre></td></tr></table></figure><p><img src="/images/R/lollipop3.png" alt></p><p>4、优化主题；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">plolli &lt;- ggplot(data,aes(x=var1,y=var2))+</span><br><span class="line">geom_point(color=<span class="string">"black"</span>,</span><br><span class="line">fill=<span class="string">"69b3a2"</span>,</span><br><span class="line">size=4,</span><br><span class="line">shape=22,</span><br><span class="line">alpha=0.8)+</span><br><span class="line">geom_segment(aes(x=var1,xend=var1,y=0,yend=var2),</span><br><span class="line">color=<span class="string">"black"</span>,</span><br><span class="line">alpha=0.8,</span><br><span class="line">size=1,</span><br><span class="line">linetype=1)+</span><br><span class="line">theme_ipsum()+</span><br><span class="line">theme(panel.grid = element_blank())</span><br><span class="line">plolli</span><br></pre></td></tr></table></figure><p><img src="/images/R/lollipop4.png" alt></p><p>5、转换为水平版本；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">plolli &lt;- ggplot(data,aes(x=var1,y=var2))+</span><br><span class="line">geom_point(color=<span class="string">"black"</span>,</span><br><span class="line">fill=<span class="string">"69b3a2"</span>,</span><br><span class="line">size=4,</span><br><span class="line">shape=22,</span><br><span class="line">alpha=0.8)+</span><br><span class="line">geom_segment(aes(x=var1,xend=var1,y=0,yend=var2),</span><br><span class="line">color=<span class="string">"black"</span>,</span><br><span class="line">alpha=0.8,</span><br><span class="line">size=1,</span><br><span class="line">linetype=1)+</span><br><span class="line">theme_ipsum()+</span><br><span class="line">theme(panel.grid = element_blank())+</span><br><span class="line">xlab(<span class="string">""</span>)+</span><br><span class="line">ylab(<span class="string">""</span>)+</span><br><span class="line">coord_flip()</span><br><span class="line">plolli</span><br></pre></td></tr></table></figure><p><img src="/images/R/lollipop5.png" alt></p><p>6、改变基线位置，默认为0；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">plolli &lt;- ggplot(data,aes(x=var1,y=var2))+</span><br><span class="line">geom_point(color=<span class="string">"black"</span>,</span><br><span class="line">fill=<span class="string">"69b3a2"</span>,</span><br><span class="line">size=4,</span><br><span class="line">shape=22,</span><br><span class="line">alpha=0.8)+</span><br><span class="line">geom_segment(aes(x=var1,xend=var1,y=10,yend=var2),</span><br><span class="line">color=<span class="string">"black"</span>,</span><br><span class="line">alpha=0.8,</span><br><span class="line">size=1,</span><br><span class="line">linetype=1)+</span><br><span class="line">theme_ipsum()+</span><br><span class="line">theme(panel.grid = element_blank())+</span><br><span class="line">xlab(<span class="string">""</span>)+</span><br><span class="line">ylab(<span class="string">""</span>)</span><br><span class="line">plolli</span><br></pre></td></tr></table></figure><p><img src="/images/R/lollipop6.png" alt></p><p>7、对数据分组，并对散点填充不同颜色；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">plolli &lt;- ggplot(data,aes(x=var1,y=var2,fill=var4))+</span><br><span class="line">geom_point(color=<span class="string">"black"</span>,</span><br><span class="line">size=4,</span><br><span class="line">shape=22,</span><br><span class="line">alpha=0.8)+</span><br><span class="line">geom_segment(aes(x=var1,xend=var1,y=10,yend=var2),</span><br><span class="line">color=<span class="string">"black"</span>,</span><br><span class="line">alpha=0.8,</span><br><span class="line">size=1,</span><br><span class="line">linetype=1)+</span><br><span class="line">theme_ipsum()+</span><br><span class="line">theme(panel.grid = element_blank(),</span><br><span class="line">legend.position = <span class="string">"none"</span>)+</span><br><span class="line">xlab(<span class="string">""</span>)+</span><br><span class="line">ylab(<span class="string">""</span>)</span><br><span class="line">plolli</span><br></pre></td></tr></table></figure><p><img src="/images/R/lollipop7.png" alt></p><p>8、分组，并对线填充不同颜色；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">plolli &lt;- ggplot(data,aes(x=var1,y=var2,fill=var4))+</span><br><span class="line">geom_point(color=<span class="string">"black"</span>,</span><br><span class="line">size=4,</span><br><span class="line">shape=22,</span><br><span class="line">alpha=0.8)+</span><br><span class="line">geom_segment(aes(x=var1,xend=var1,y=10,yend=var2,color=var4),</span><br><span class="line">alpha=0.8,</span><br><span class="line">size=1,</span><br><span class="line">linetype=1)+</span><br><span class="line">theme_ipsum()+</span><br><span class="line">theme(panel.grid = element_blank(),</span><br><span class="line">legend.position = <span class="string">"none"</span>)+</span><br><span class="line">xlab(<span class="string">""</span>)+</span><br><span class="line">ylab(<span class="string">""</span>)</span><br><span class="line">plolli</span><br></pre></td></tr></table></figure><p><img src="/images/R/lollipop8.png" alt></p><p>9、排序；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">data &lt;- data.frame(var1,var2,var3,var4)</span><br><span class="line">data &lt;- arrange(data,var2)</span><br><span class="line">data[,1]=factor(data[,1],levels=data[,1],order=T)</span><br><span class="line">plolli &lt;- ggplot(data,aes(x=var1,y=var2,fill=var4))+</span><br><span class="line">geom_point(color=<span class="string">"black"</span>,</span><br><span class="line">size=4,</span><br><span class="line">shape=22,</span><br><span class="line">alpha=0.8)+</span><br><span class="line">geom_segment(aes(x=var1,xend=var1,y=0,yend=var2,color=var4),</span><br><span class="line">alpha=0.8,</span><br><span class="line">size=1,</span><br><span class="line">linetype=1)+</span><br><span class="line">theme_ipsum()+</span><br><span class="line">theme(panel.grid = element_blank(),</span><br><span class="line">legend.position = <span class="string">"none"</span>)+</span><br><span class="line">xlab(<span class="string">""</span>)+</span><br><span class="line">ylab(<span class="string">""</span>)</span><br><span class="line">plolli</span><br></pre></td></tr></table></figure><p><img src="/images/R/lollipop9.png" alt></p><p>10、克利夫兰点图，比较每个实体中的两个点的关系；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">plolli &lt;- ggplot(data,aes(x=var1,y=var2,fill=var4))+</span><br><span class="line">geom_segment(aes(x=var1,xend=var1,y=var2,yend=var3),linetype=2)+</span><br><span class="line">geom_point(aes(x=var1,y=var2),color=alpha(<span class="string">"red"</span>,0.5),size=3)+</span><br><span class="line">geom_point(aes(x=var1,y=var3),color=alpha(<span class="string">"blue"</span>,0.5),size=3)+</span><br><span class="line">coord_flip()+</span><br><span class="line">theme_ipsum()+</span><br><span class="line">theme(legend.position = <span class="string">"none"</span>,</span><br><span class="line">panel.grid.major.y = element_blank())+</span><br><span class="line">xlab(<span class="string">""</span>)+</span><br><span class="line">ylab(<span class="string">""</span>)</span><br><span class="line">plolli</span><br></pre></td></tr></table></figure><p><img src="/images/R/lollipop10.png" alt></p><p>克利夫兰点图，若不进行排序，会显得图片杂乱无章，因此，最好先排序后作图。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;棒棒糖图，介于柱形图与散点图之间，之所以这么说，是因为它能以柱形图与散点图的数据作图，即两列定量变量（数字），或一列定量变量（数字）一列分类变量（字符串）；&lt;/p&gt;
&lt;p&gt;有趣的是，棒棒糖图其实不是由一个函数绘制的，而是由两个函数叠加成的，即使用geom_point()绘制
      
    
    </summary>
    
      <category term="编程语言" scheme="http://uteric.github.io/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="R可视化" scheme="http://uteric.github.io/tags/R%E5%8F%AF%E8%A7%86%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>R可视化-线图</title>
    <link href="http://uteric.github.io/R/R_visualize_line/"/>
    <id>http://uteric.github.io/R/R_visualize_line/</id>
    <published>2020-02-12T04:51:34.000Z</published>
    <updated>2020-02-12T04:51:34.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、绘制基本线图"><a href="#一、绘制基本线图" class="headerlink" title="一、绘制基本线图"></a>一、绘制基本线图</h1><p>对于线图的作图数据，至少两列，且两列都是数值变量；从本质上讲，其实就是散点图加上连线；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">library(hrbrthemes)</span><br><span class="line"><span class="comment"># 作图数据；</span></span><br><span class="line">var1&lt;- seq(1:100)</span><br><span class="line">var2&lt;- seq(1:100)+rnorm(100,mean=1,sd=2)</span><br><span class="line">data &lt;- data.frame(var1,var2)</span><br><span class="line"><span class="comment"># 线图；</span></span><br><span class="line">pline &lt;- ggplot(data,aes(x=var1,y=var2))+</span><br><span class="line">geom_line(alpha=0.9,size=1,linetype=6,color=<span class="string">"#69b3a2"</span>)+</span><br><span class="line">theme_ipsum()+</span><br><span class="line">xlab(<span class="string">""</span>)+</span><br><span class="line">ylab(<span class="string">""</span>)+</span><br><span class="line">pline</span><br><span class="line">ggsave(pline,filename=<span class="string">"line01.png"</span>,width=12,height=9)</span><br></pre></td></tr></table></figure><p><img src="/images/R/line01.png" alt></p><h1 id="二、对数转换"><a href="#二、对数转换" class="headerlink" title="二、对数转换"></a>二、对数转换</h1><p>有时，数据在坐标轴上跨度很大，如果取大单位，则小数据会看不到，这时候可以对坐标轴作对数转换；<br>注意：实际作图时坐标轴的值为真值，并不是取对数后的值，但是坐标轴的刻度却是以对数值分布的，比如（10，100，1000，100）分别对应坐标轴上的（1，2，3，4）的位置，但显示的刻度却是（10，100，1000，10000）；<br>对数转换有个极大的优点，即放大了曲线的下端；<br>本例中仅对Y轴作对数转换，也可以对x轴进行对数转换，或根据需要同时转换；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pline &lt;- ggplot(data,aes(x=var1,y=var2))+</span><br><span class="line">geom_line(alpha=0.9,size=1,linetype=6,color=<span class="string">"#69b3a2"</span>)+</span><br><span class="line">theme_ipsum()+</span><br><span class="line">xlab(<span class="string">""</span>)+</span><br><span class="line">ylab(<span class="string">""</span>)+</span><br><span class="line">scale_y_log10()</span><br><span class="line">pline</span><br></pre></td></tr></table></figure><p><img src="/images/R/line02.png" alt></p><h1 id="三、显示数据点"><a href="#三、显示数据点" class="headerlink" title="三、显示数据点"></a>三、显示数据点</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pline &lt;- ggplot(data,aes(x=var1,y=var2))+</span><br><span class="line">geom_line(alpha=0.9,size=1,linetype=1,color=<span class="string">"steelblue"</span>)+</span><br><span class="line">theme_ipsum()+</span><br><span class="line">xlab(<span class="string">""</span>)+</span><br><span class="line">ylab(<span class="string">""</span>)+</span><br><span class="line">geom_point(alpha=0.9,size=1.5,shape=21,fill=<span class="string">"blue"</span>)</span><br><span class="line">pline</span><br></pre></td></tr></table></figure><p><img src="/images/R/line03.png" alt></p><h1 id="四、分组"><a href="#四、分组" class="headerlink" title="四、分组"></a>四、分组</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var1 &lt;- c(rep(<span class="string">"A"</span>,30),rep(<span class="string">"B"</span>,30),rep(<span class="string">"C"</span>,30))</span><br><span class="line">var2 &lt;- c(rnorm(30),rnorm(30,mean=3),rnorm(30,mean=9))</span><br><span class="line">var3 &lt;- c(rnorm(30,mean=4),rnorm(30,mean=2),rnorm(30,mean=1))</span><br><span class="line">data &lt;- data.frame(var1,var2,var3)</span><br><span class="line">pline &lt;- ggplot(data,aes(x=var2,y=var3,group=var1,color=var1))+</span><br><span class="line">geom_line()+</span><br><span class="line">geom_point()+</span><br><span class="line">theme_ipsum()+</span><br><span class="line">xlab(<span class="string">""</span>)+</span><br><span class="line">ylab(<span class="string">""</span>)</span><br><span class="line">pline</span><br></pre></td></tr></table></figure><p><img src="/images/R/line04.png" alt></p><h1 id="五、添加水平与垂直标度线，注释点，注释文字"><a href="#五、添加水平与垂直标度线，注释点，注释文字" class="headerlink" title="五、添加水平与垂直标度线，注释点，注释文字"></a>五、添加水平与垂直标度线，注释点，注释文字</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">pline &lt;- ggplot(data,aes(x=var2,y=var3,group=var1,color=var1))+</span><br><span class="line">geom_line()+</span><br><span class="line">geom_point()+</span><br><span class="line">theme_ipsum()+</span><br><span class="line">xlab(<span class="string">""</span>)+</span><br><span class="line">ylab(<span class="string">""</span>)+</span><br><span class="line">geom_hline(yintercept=2.18,color=<span class="string">"red"</span>,size=0.7,alpha=0.9)+</span><br><span class="line">geom_vline(xintercept=4.47,color=<span class="string">"blue"</span>,size=0.7,alpha=0.9)+</span><br><span class="line">annotate(geom=<span class="string">"point"</span>,x=4.47,y=2.18,size=3,fill=<span class="string">"transparent"</span>,color=<span class="string">"red"</span>)+</span><br><span class="line">annotate(geom=<span class="string">"text"</span>,x=5,y=1.5,label=<span class="string">"very important"</span>,color=<span class="string">"red"</span>)</span><br><span class="line">pline</span><br></pre></td></tr></table></figure><p><img src="/images/R/line05.png" alt></p><h1 id="六、使用patchwork绘制双Y轴"><a href="#六、使用patchwork绘制双Y轴" class="headerlink" title="六、使用patchwork绘制双Y轴"></a>六、使用patchwork绘制双Y轴</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">library(dplyr)</span><br><span class="line">library(tidyr)</span><br><span class="line">library(ggrepel)</span><br><span class="line">library(patchwork)</span><br><span class="line"></span><br><span class="line">var1 &lt;- c(rep(<span class="string">"A"</span>,30),rep(<span class="string">"B"</span>,30),rep(<span class="string">"C"</span>,30))</span><br><span class="line">var2 &lt;- c(rnorm(30),rnorm(30,mean=3),rnorm(30,mean=9))</span><br><span class="line">var3 &lt;- c(rnorm(30,mean=4),rnorm(30,mean=2),rnorm(30,mean=1))</span><br><span class="line">var4 &lt;- c(1:90)</span><br><span class="line">data &lt;- data.frame(var1,var2,var3,var4)</span><br><span class="line">p1 &lt;- ggplot(data,aes(x=var4,y=var2))+</span><br><span class="line">geom_line(color=<span class="string">"blue"</span>,size=1)</span><br><span class="line">p1  </span><br><span class="line">p2 &lt;- ggplot(data,aes(x=var4,y=var3))+</span><br><span class="line">geom_line(color=<span class="string">"red"</span>,size=1)</span><br><span class="line">p2</span><br><span class="line">pline &lt;- p1+p2</span><br><span class="line">pline</span><br></pre></td></tr></table></figure><p><img src="/images/R/line06.png" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;一、绘制基本线图&quot;&gt;&lt;a href=&quot;#一、绘制基本线图&quot; class=&quot;headerlink&quot; title=&quot;一、绘制基本线图&quot;&gt;&lt;/a&gt;一、绘制基本线图&lt;/h1&gt;&lt;p&gt;对于线图的作图数据，至少两列，且两列都是数值变量；从本质上讲，其实就是散点图加上连线；&lt;/p
      
    
    </summary>
    
      <category term="编程语言" scheme="http://uteric.github.io/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="R可视化" scheme="http://uteric.github.io/tags/R%E5%8F%AF%E8%A7%86%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>R可视化-散点图</title>
    <link href="http://uteric.github.io/R/R_visualize_scatter/"/>
    <id>http://uteric.github.io/R/R_visualize_scatter/</id>
    <published>2020-02-12T04:51:29.000Z</published>
    <updated>2020-02-12T04:51:29.000Z</updated>
    
    <content type="html"><![CDATA[<p>在绘图之前，先谈谈散点图需要的数据类型。散点，顾名思义，就是很多点分散在平面上，而在平面坐标中，确定一个点需要两个坐标值，因此，绘制散点图的数据需要两列，且两列都是数字，对应的每一行都是平面坐标中的一个点。</p><p>另外，样本大小没有限制，少到一个点，多到成千上万，都是可以的；对于有规律的散点，甚至也可以拟合平滑曲线呈现其趋势。</p><h1 id="一、绘制基本的散点图"><a href="#一、绘制基本的散点图" class="headerlink" title="一、绘制基本的散点图"></a>一、绘制基本的散点图</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成随机数据；</span></span><br><span class="line">var1 &lt;- runif(200) <span class="comment"># runif用来生成介于min与max之间的随机数，默认0至1之间；</span></span><br><span class="line">var2 &lt;- runif(200,min=3,max=15)</span><br><span class="line">data &lt;- data.frame(var1,var2) <span class="comment"># 通过runif()生成的数据是毫无规律可言的，是名副其实的散点；</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制散点图；</span></span><br><span class="line">pscatter &lt;- ggplot(data,aes(x=var1,y=var2))+</span><br><span class="line">geom_point() <span class="comment"># 绘制散点图的函数；</span></span><br><span class="line">pscatter</span><br><span class="line">ggsave(pscatter,filename=<span class="string">"scatter.png"</span>,width=12,height=9)</span><br></pre></td></tr></table></figure><p><img src="/images/R/scatter01.png" alt></p><h1 id="二、散点图优化"><a href="#二、散点图优化" class="headerlink" title="二、散点图优化"></a>二、散点图优化</h1><p>2.1 对散点进行修饰，改变散点大小，形状，颜色，透明度，与笔触；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pscatter &lt;- ggplot(data,aes(x=var1,y=var2))+</span><br><span class="line">geom_point(color=<span class="string">"black"</span>, <span class="comment"># 笔触颜色；</span></span><br><span class="line">fill=<span class="string">"#69b3a2"</span>, <span class="comment">#填充色；</span></span><br><span class="line">size=4,  <span class="comment"># 大小；</span></span><br><span class="line">shape=22, <span class="comment"># 形状；</span></span><br><span class="line">alpha=0.8, <span class="comment"># 透明度；</span></span><br><span class="line">stroke=1)+ <span class="comment"># 笔触大小；</span></span><br><span class="line">theme_ipsum()</span><br><span class="line">pscatter</span><br></pre></td></tr></table></figure><p><img src="/images/R/scatter02.png" alt></p><p>2.2 对散点进行分类；<br>为方便分类，在此我们给data添加新的一列var3，并以var3分组进行填充；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var1 &lt;- runif(200)</span><br><span class="line">var2 &lt;- runif(200,min=3,max=15)</span><br><span class="line">var3 &lt;- c(rep(<span class="string">"A"</span>,30),rep(<span class="string">"B"</span>,60),rep(<span class="string">"C"</span>,110))</span><br><span class="line">data &lt;- data.frame(var1,var2,var3)</span><br><span class="line">pscatter &lt;- ggplot(data,aes(x=var1,y=var2,fill=var3))+</span><br><span class="line">geom_point(size=4,</span><br><span class="line">shape=24,</span><br><span class="line">alpha=0.8,</span><br><span class="line">stroke=1)+</span><br><span class="line">theme_ipsum()</span><br><span class="line">pscatter</span><br></pre></td></tr></table></figure><p><img src="/images/R/scatter03.png" alt></p><p>2.3 以var3分组设定形状；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pscatter &lt;- ggplot(data,aes(x=var1,y=var2,shape=var3))+</span><br><span class="line">geom_point(size=4,</span><br><span class="line">color=<span class="string">"#69b3a2"</span>,</span><br><span class="line">alpha=0.9,</span><br><span class="line">stroke=1)+</span><br><span class="line">theme_ipsum()</span><br><span class="line">pscatter</span><br></pre></td></tr></table></figure><p><img src="/images/R/scatter04.png" alt></p><p>2.4 以var3分组设定大小；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pscatter &lt;- ggplot(data,aes(x=var1,y=var2,size=var3))+</span><br><span class="line">geom_point(color=<span class="string">"black"</span>,</span><br><span class="line">fill=<span class="string">"#69b3a2"</span>,</span><br><span class="line">alpha=0.9,</span><br><span class="line">shape=22,</span><br><span class="line">stroke=1)+</span><br><span class="line">theme_ipsum()</span><br><span class="line">pscatter</span><br></pre></td></tr></table></figure><p><img src="/images/R/scatter05.png" alt></p><p>2.5 以var3分组设定透明度；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pscatter &lt;- ggplot(data,aes(x=var1,y=var2,alpha=var3))+</span><br><span class="line">geom_point(color=<span class="string">"black"</span>,</span><br><span class="line">fill=<span class="string">"#69b3a2"</span>,</span><br><span class="line">size=4,</span><br><span class="line">shape=22,</span><br><span class="line">stroke=1)+</span><br><span class="line">theme_ipsum()</span><br><span class="line">pscatter</span><br></pre></td></tr></table></figure><p><img src="/images/R/scatter06.png" alt></p><p>2.6 以var3分组，同时设定形状，透明度，大小，颜色；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pscatter &lt;- ggplot(data,aes(x=var1,y=var2,shape=var3,alpha=var3,size=var3,color=var3))+</span><br><span class="line">geom_point()+</span><br><span class="line">theme_ipsum()</span><br><span class="line">pscatter</span><br></pre></td></tr></table></figure><p><img src="/images/R/scatter07.png" alt></p><h1 id="三、给散点添加文字标签"><a href="#三、给散点添加文字标签" class="headerlink" title="三、给散点添加文字标签"></a>三、给散点添加文字标签</h1><p>3.1 使用geom_text()函数添加文字；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var1 &lt;- runif(26)</span><br><span class="line">var2 &lt;- runif(26,min=3,max=15)</span><br><span class="line">var3 &lt;- c(rep(<span class="string">"classI"</span>,6),rep(<span class="string">"classII"</span>,9),rep(<span class="string">"classIII"</span>,11))</span><br><span class="line">var4 &lt;- LETTERS[1:26]</span><br><span class="line">data &lt;- data.frame(var1,var2,var3,var4)</span><br><span class="line">pscatter &lt;- ggplot(data,aes(x=var1,y=var2,fill=var3))+</span><br><span class="line">geom_point(color=<span class="string">"black"</span>,</span><br><span class="line">size=4,</span><br><span class="line">alpha=0.8,</span><br><span class="line">shape=22,</span><br><span class="line">stroke=1)+</span><br><span class="line">theme_ipsum()+</span><br><span class="line">geom_text(label=var4, <span class="comment"># 指定标签来源</span></span><br><span class="line">nudge_x=0.02,nudge_y=0.02, <span class="comment"># 标签位置的偏移量；</span></span><br><span class="line">check_overlap = T) <span class="comment"># 尽量不要重叠；</span></span><br><span class="line">pscatter</span><br></pre></td></tr></table></figure><p><img src="/images/R/scatter08.png" alt></p><p>3.2 使用geom_label()函数添加文字标签，效果与geom_text()不同，会显示外框；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">pscatter &lt;- ggplot(data,aes(x=var1,y=var2,fill=var3))+</span><br><span class="line">geom_point(color=<span class="string">"black"</span>,</span><br><span class="line">size=4,</span><br><span class="line">alpha=0.8,</span><br><span class="line">shape=22,</span><br><span class="line">stroke=1)+</span><br><span class="line">theme_ipsum()+</span><br><span class="line">geom_label(label=var4,</span><br><span class="line">nudge_x=0.02,nudge_y=0.02,</span><br><span class="line">check_overlap = T,</span><br><span class="line">fill=<span class="string">"white"</span>,</span><br><span class="line">color=<span class="string">"blue"</span>)</span><br><span class="line">pscatter</span><br></pre></td></tr></table></figure><p><img src="/images/R/scatter09.png" alt></p><p>3.3 只添加一个文字标签；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">pscatter &lt;- ggplot(data,aes(x=var1,y=var2,fill=var3))+</span><br><span class="line">geom_point(color=<span class="string">"black"</span>,</span><br><span class="line">size=4,</span><br><span class="line">alpha=0.8,</span><br><span class="line">shape=22,</span><br><span class="line">stroke=1)+</span><br><span class="line">theme_ipsum()+</span><br><span class="line">geom_label(label=<span class="string">"important"</span>, <span class="comment"># 直接以字符串形式指定标签内容；</span></span><br><span class="line">x=0.5, <span class="comment"># 位置</span></span><br><span class="line">y=6.5,</span><br><span class="line">fill=<span class="string">"white"</span>,</span><br><span class="line">color=<span class="string">"blue"</span>)</span><br><span class="line">pscatter</span><br></pre></td></tr></table></figure><p><img src="/images/R/scatter10.png" alt></p><p>3.4 仅对选择的点添加文字标签；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">library(dplyr) <span class="comment"># 调用dplyr包中的filter()函数进行数据筛选；</span></span><br><span class="line">var1 &lt;- runif(26)</span><br><span class="line">var2 &lt;- runif(26,min=3,max=15)</span><br><span class="line">var3 &lt;- c(rep(<span class="string">"classI"</span>,6),rep(<span class="string">"classII"</span>,9),rep(<span class="string">"classIII"</span>,11))</span><br><span class="line">var4 &lt;- LETTERS[1:26]</span><br><span class="line">data &lt;- data.frame(var1,var2,var3,var4)</span><br><span class="line">data2 &lt;- filter(data,var1&gt;0.5 &amp; var2&gt;9)</span><br><span class="line">data2</span><br><span class="line">pscatter &lt;- ggplot(data,aes(x=var1,y=var2,fill=var3))+</span><br><span class="line">geom_point(color=<span class="string">"black"</span>,</span><br><span class="line">size=4,</span><br><span class="line">alpha=0.8,</span><br><span class="line">shape=22,</span><br><span class="line">stroke=1)+</span><br><span class="line">theme_ipsum()+</span><br><span class="line">geom_label(data=data2,</span><br><span class="line">aes(label=var4), <span class="comment"># 语法格式为(data=,aes(label=));</span></span><br><span class="line">nudge_x=0.03,nudge_y=0.03,</span><br><span class="line">check_overlap = T,</span><br><span class="line">fill=<span class="string">"transparent"</span>)</span><br><span class="line">pscatter</span><br></pre></td></tr></table></figure><p><img src="/images/R/scatter11.png" alt></p><p>3.5 为坐标轴添加触须;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用geom_rug()添加触须，并指定颜色，透明度，和大小；</span></span><br><span class="line">var1 &lt;- runif(26)</span><br><span class="line">var2 &lt;- runif(26,min=3,max=15)</span><br><span class="line">var3 &lt;- c(rep(<span class="string">"classI"</span>,6),rep(<span class="string">"classII"</span>,9),rep(<span class="string">"classIII"</span>,11))</span><br><span class="line">var4 &lt;- LETTERS[1:26]</span><br><span class="line">data &lt;- data.frame(var1,var2,var3,var4)</span><br><span class="line">pscatter &lt;- ggplot(data,aes(x=var1,y=var2,fill=var3))+</span><br><span class="line">geom_point(color=<span class="string">"black"</span>,</span><br><span class="line">size=4,</span><br><span class="line">alpha=0.8,</span><br><span class="line">shape=22,</span><br><span class="line">stroke=1)+</span><br><span class="line">theme_ipsum()+</span><br><span class="line">geom_rug(col=<span class="string">"steelblue"</span>,alpha=0.7, size=0.9)</span><br><span class="line">pscatter</span><br></pre></td></tr></table></figure><p><img src="/images/R/scatter12.png" alt></p><h1 id="四、添加边际分布（Marginal-distribution）"><a href="#四、添加边际分布（Marginal-distribution）" class="headerlink" title="四、添加边际分布（Marginal distribution）"></a>四、添加边际分布（Marginal distribution）</h1><p>边际分布可以通过ggExtra:ggMarginal()函数添加，用法如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ggMarginal(p, data, x, y, <span class="built_in">type</span> = c(<span class="string">"density"</span>, <span class="string">"histogram"</span>, <span class="string">"boxplot"</span>,</span><br><span class="line"><span class="string">"violin"</span>, <span class="string">"densigram"</span>), margins = c(<span class="string">"both"</span>, <span class="string">"x"</span>, <span class="string">"y"</span>), size = 5, ...,</span><br><span class="line">xparams = list(), yparams = list(), groupColour = FALSE,</span><br><span class="line">groupFill = FALSE,color,fill)</span><br><span class="line"><span class="comment"># type必须是五种中的一种；margins决定呈现在X轴，Y轴或双侧（默认）；size决定大小；</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">library(dplyr)</span><br><span class="line">library(ggplot2)</span><br><span class="line">library(hrbrthemes)</span><br><span class="line">library(ggExtra)</span><br><span class="line">var1 &lt;- runif(26)</span><br><span class="line">var2 &lt;- runif(26,min=3,max=15)</span><br><span class="line">var3 &lt;- c(rep(<span class="string">"classI"</span>,6),rep(<span class="string">"classII"</span>,9),rep(<span class="string">"classIII"</span>,11))</span><br><span class="line">var4 &lt;- LETTERS[1:26]</span><br><span class="line">data &lt;- data.frame(var1,var2,var3,var4)</span><br><span class="line">pscatter &lt;- ggplot(data,aes(x=var1,y=var2,fill=var3))+</span><br><span class="line">geom_point(color=<span class="string">"black"</span>,</span><br><span class="line">size=3,</span><br><span class="line">alpha=0.8,</span><br><span class="line">shape=22,</span><br><span class="line">stroke=1)+</span><br><span class="line">theme_ipsum()+</span><br><span class="line">theme(legend.position = <span class="string">"none"</span>)+</span><br><span class="line">geom_rug(col=<span class="string">"steelblue"</span>,alpha=0.7, size=0.9)</span><br><span class="line">pscatter1 &lt;- ggMarginal(pscatter,<span class="built_in">type</span>=<span class="string">"densigram"</span>)</span><br><span class="line">pscatter1</span><br></pre></td></tr></table></figure><p>进一步优化，指定大小（数字越大边际占比越小），添加填充色；</p><p><img src="/images/R/scatter13.png" alt></p><h1 id="五、添加平滑趋势线"><a href="#五、添加平滑趋势线" class="headerlink" title="五、添加平滑趋势线"></a>五、添加平滑趋势线</h1><p>使用函数geom_smooth()添加趋势线，用法如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">geom_smooth(mapping = NULL, data = NULL, <span class="built_in">stat</span> = <span class="string">"smooth"</span>,</span><br><span class="line">position = <span class="string">"identity"</span>, ..., method = <span class="string">"auto"</span>, formula = y ~ x,</span><br><span class="line">se = TRUE, na.rm = FALSE, show.legend = NA, inherit.aes = TRUE)</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var5 &lt;- 1:200+rnorm(200,sd=2)</span><br><span class="line">var6 &lt;- 1:200+rnorm(200,sd=5)</span><br><span class="line">var7 &lt;- rep(c(<span class="string">"classI"</span>,<span class="string">"classII"</span>),each=100)</span><br><span class="line">data &lt;- data.frame(var5,var6,var7)</span><br><span class="line">head(data)</span><br><span class="line">pscatter &lt;- ggplot(data,aes(x=var5,y=var6,fill=var7))+</span><br><span class="line">geom_point(color=<span class="string">"blue"</span>,</span><br><span class="line">size=0.9)+</span><br><span class="line">geom_smooth(method=lm,color=<span class="string">"red"</span>,se=F)</span><br><span class="line">pscatter</span><br></pre></td></tr></table></figure><p><img src="/images/R/scatter14.png" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在绘图之前，先谈谈散点图需要的数据类型。散点，顾名思义，就是很多点分散在平面上，而在平面坐标中，确定一个点需要两个坐标值，因此，绘制散点图的数据需要两列，且两列都是数字，对应的每一行都是平面坐标中的一个点。&lt;/p&gt;
&lt;p&gt;另外，样本大小没有限制，少到一个点，多到成千上万，都
      
    
    </summary>
    
      <category term="编程语言" scheme="http://uteric.github.io/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="R可视化" scheme="http://uteric.github.io/tags/R%E5%8F%AF%E8%A7%86%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>R可视化-小提琴图</title>
    <link href="http://uteric.github.io/R/R_visualize_violin/"/>
    <id>http://uteric.github.io/R/R_visualize_violin/</id>
    <published>2020-02-10T04:49:49.000Z</published>
    <updated>2020-02-10T04:49:49.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、简单小提琴图"><a href="#一、简单小提琴图" class="headerlink" title="一、简单小提琴图"></a>一、简单小提琴图</h1><p>小提琴图的作图数据同箱线图，X轴为定性变量，Y轴为定量变量，数据量足够大才有统计意义；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">library(hrbrthemes)</span><br><span class="line"></span><br><span class="line">name &lt;- c(rep(<span class="string">"A"</span>,300),rep(<span class="string">"B"</span>,300),rep(<span class="string">"C"</span>,100),rep(<span class="string">"C"</span>,200),rep(<span class="string">"D"</span>,300))</span><br><span class="line">value &lt;- c(rnorm(300,10,2),rnorm(300,15,4),rnorm(100,5,1),rnorm(200,12,1),rnorm(300,3,1))</span><br><span class="line">data &lt;- data.frame(name,value)</span><br><span class="line"></span><br><span class="line">pviolin &lt;- ggplot(data,aes(x=name,y=value,fill=name))+</span><br><span class="line">geom_violin()+</span><br><span class="line">geom_jitter(color=<span class="string">"black"</span>, size=0.4, alpha=0.9)+</span><br><span class="line">theme_ipsum()+</span><br><span class="line">theme(legend.position=<span class="string">"none"</span>)+</span><br><span class="line">ggtitle(<span class="string">"violin plot with jitter"</span>) +</span><br><span class="line">xlab(<span class="string">""</span>)</span><br><span class="line">pviolin</span><br></pre></td></tr></table></figure><p><img src="/images/R/violin01.png" alt></p><h1 id="二、小提琴图优化"><a href="#二、小提琴图优化" class="headerlink" title="二、小提琴图优化"></a>二、小提琴图优化</h1><p>2.1 排序</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果要对X轴进行升序排列，使用reorder(x=x,y=y)函数；</span></span><br><span class="line"><span class="comment"># 若要降序排列，则使用reorder(x=x,y=-y)函数；</span></span><br><span class="line">pviolin &lt;- ggplot(data,aes(x=reorder(name,-value),y=value,fill=name))+</span><br><span class="line">geom_violin()+</span><br><span class="line">geom_jitter(color=<span class="string">"black"</span>, size=0.4, alpha=0.9)+</span><br><span class="line">theme_ipsum()+</span><br><span class="line">theme(legend.position=<span class="string">"none"</span>)+</span><br><span class="line">ggtitle(<span class="string">"violin plot with jitter"</span>) +</span><br><span class="line">xlab(<span class="string">""</span>)</span><br><span class="line">pviolin</span><br></pre></td></tr></table></figure><p><img src="/images/R/violin02.png" alt></p><p>2.2 调节Y轴限度，使用ylim()函数</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ggsave(pviolin,filename=<span class="string">"violin4.png"</span>,width=12,height=9)</span><br><span class="line">pviolin &lt;- ggplot(data,aes(x=reorder(name,-value),y=value,fill=name))+</span><br><span class="line">geom_violin()+</span><br><span class="line">geom_boxplot(width=0.1,color=<span class="string">"grey"</span>,alpha=0.3)+</span><br><span class="line">theme_ipsum()+</span><br><span class="line">theme(legend.position=<span class="string">"none"</span>)+</span><br><span class="line">ggtitle(<span class="string">"violin plot with jitter"</span>) +</span><br><span class="line">xlab(<span class="string">""</span>)+</span><br><span class="line">ylim(0,30)</span><br><span class="line">pviolin</span><br></pre></td></tr></table></figure><p><img src="/images/R/violin03.png" alt></p><p>2.3 绘制水平小提琴图，加上coord_flip()函数</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pviolin &lt;- ggplot(data,aes(x=reorder(name,-value),y=value,fill=name))+</span><br><span class="line">geom_violin()+</span><br><span class="line">geom_jitter(color=<span class="string">"black"</span>, size=0.4, alpha=0.9)+</span><br><span class="line">theme_ipsum()+</span><br><span class="line">theme(legend.position=<span class="string">"none"</span>)+</span><br><span class="line">ggtitle(<span class="string">"violin plot with jitter"</span>) +</span><br><span class="line">xlab(<span class="string">""</span>)+</span><br><span class="line">coord_flip()</span><br><span class="line">pviolin</span><br></pre></td></tr></table></figure><p><img src="/images/R/violin04.png" alt></p><p>2.4 同时绘制小提琴图与箱线图</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pviolin &lt;- ggplot(data,aes(x=reorder(name,-value),y=value,fill=name))+</span><br><span class="line">geom_violin()+</span><br><span class="line">geom_boxplot(width=0.1,color=<span class="string">"grey"</span>,alpha=0.3)+</span><br><span class="line">geom_jitter(color=<span class="string">"black"</span>, size=0.4, alpha=0.9)+</span><br><span class="line">theme_ipsum()+</span><br><span class="line">theme(legend.position=<span class="string">"none"</span>)+</span><br><span class="line">ggtitle(<span class="string">"violin plot with jitter"</span>) +</span><br><span class="line">xlab(<span class="string">""</span>)</span><br><span class="line">pviolin</span><br></pre></td></tr></table></figure><p><img src="/images/R/violin05.png" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;一、简单小提琴图&quot;&gt;&lt;a href=&quot;#一、简单小提琴图&quot; class=&quot;headerlink&quot; title=&quot;一、简单小提琴图&quot;&gt;&lt;/a&gt;一、简单小提琴图&lt;/h1&gt;&lt;p&gt;小提琴图的作图数据同箱线图，X轴为定性变量，Y轴为定量变量，数据量足够大才有统计意义；&lt;/p
      
    
    </summary>
    
      <category term="编程语言" scheme="http://uteric.github.io/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="R可视化" scheme="http://uteric.github.io/tags/R%E5%8F%AF%E8%A7%86%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>R可视化－箱线图 Boxplot</title>
    <link href="http://uteric.github.io/R/R_visualize_boxplot/"/>
    <id>http://uteric.github.io/R/R_visualize_boxplot/</id>
    <published>2020-02-08T03:09:39.000Z</published>
    <updated>2020-02-08T03:09:39.000Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">library(tidyverse)</span><br><span class="line"><span class="comment"># tidyverse，包含ggplot2；</span></span><br><span class="line">library(hrbrthemes)</span><br><span class="line"><span class="comment"># hrbrthemes，主题包；</span></span><br><span class="line">library(viridis)</span><br><span class="line"><span class="comment"># Viridis，，配色包，是从Python移植到R的，共有四种配色：A=magma，B=plasma，C=inferno，D=viridis，默认为D，语法如下：</span></span><br><span class="line"><span class="comment"># scale_fill_viridis(..., alpha = 1, begin = 0, end = 1, direction = 1, discrete = FALSE, option = "D")</span></span><br><span class="line"><span class="comment"># 对于离散型的数据，需要指定discrete=TRUE，否则会报错；alpha，指定透明度； </span></span><br><span class="line"></span><br><span class="line">name &lt;- c(rep(<span class="string">"A"</span>,300),rep(<span class="string">"B"</span>,300),rep(<span class="string">"C"</span>,100),rep(<span class="string">"C"</span>,200),rep(<span class="string">"D"</span>,300))</span><br><span class="line">value &lt;- c(rnorm(300,10,2),rnorm(300,15,4),rnorm(100,5,1),rnorm(200,12,1),rnorm(300,3,1))</span><br><span class="line">data &lt;- data.frame(name,value)</span><br><span class="line">pbox &lt;- ggplot(data,aes(x=name,y=value,fill=name))+</span><br><span class="line">geom_boxplot()+</span><br><span class="line">scale_fill_viridis(option=<span class="string">"D"</span>,discrete = TRUE, alpha=0.6)+</span><br><span class="line">geom_jitter(color=<span class="string">"black"</span>, size=0.4, alpha=0.9)+ <span class="comment"># geom_jitter()，ggplot2的程序包，绘制随机抖动散点；</span></span><br><span class="line">theme_ipsum()+</span><br><span class="line">theme(legend.position=<span class="string">"none"</span>)+ <span class="comment"># 去掉图例；</span></span><br><span class="line">ggtitle(<span class="string">"A boxplot with jitter"</span>) +</span><br><span class="line">xlab(<span class="string">""</span>)</span><br><span class="line">pbox</span><br><span class="line">ggsave(pbox,filename=<span class="string">"box.png"</span>,width=12,height=9)</span><br></pre></td></tr></table></figure><p><img src="/images/R/boxplot01.png" alt></p><p>关于箱线图的数据类型：<br>X轴为定性变量，如本例中的A，B，C，D；Y轴为定量变量，即具体的数值；箱线图可以用来观察数据的分散情况，以及是否有异常值；因此，本例中使用rnorm()函数产生的正态分布数据作为输入；而对于本例中的分类C，明显由两组数据组成，绘制小提琴图或许是更直观的方式；</p><p>补充说明：hrbrthemes，是ggplot2的附加主题，如常用的theme_ipsum()，可以对图形重新排版，对标题，副标题等的字体，字号，加粗，坐标轴，网格线，刻度线等都进行了定义，另外，可以调节坐标轴标签的位置，参数为[blmcrt]，默认为[rt]；遗憾的是，并不能通过这个程序添加标题，副标题，或者坐标轴标签，因此，需要结合theme(), ggtitle()与xlab(),ylab()；语法如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">theme_ipsum(base_family = <span class="string">"Arial Narrow"</span>, base_size = 11.5,</span><br><span class="line">plot_title_family = base_family, plot_title_size = 18,</span><br><span class="line">plot_title_face = <span class="string">"bold"</span>, plot_title_margin = 10,</span><br><span class="line">subtitle_family = base_family, subtitle_size = 12,</span><br><span class="line">subtitle_face = <span class="string">"plain"</span>, subtitle_margin = 15,</span><br><span class="line">strip_text_family = base_family, strip_text_size = 12,</span><br><span class="line">strip_text_face = <span class="string">"plain"</span>, caption_family = base_family,</span><br><span class="line">caption_size = 9, caption_face = <span class="string">"italic"</span>, caption_margin = 10,</span><br><span class="line">axis_text_size = base_size, axis_title_family = subtitle_family,</span><br><span class="line">axis_title_size = 9, axis_title_face = <span class="string">"plain"</span>,</span><br><span class="line">axis_title_just = <span class="string">"rt"</span>, plot_margin = margin(30, 30, 30, 30),</span><br><span class="line">grid_col = <span class="string">"#cccccc"</span>, grid = TRUE, axis_col = <span class="string">"#cccccc"</span>,</span><br><span class="line">axis = FALSE, ticks = FALSE)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=
      
    
    </summary>
    
      <category term="编程语言" scheme="http://uteric.github.io/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="R可视化" scheme="http://uteric.github.io/tags/R%E5%8F%AF%E8%A7%86%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>R语言学习笔记-数据创建</title>
    <link href="http://uteric.github.io/R/R%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E6%8D%AE%E5%88%9B%E5%BB%BA/"/>
    <id>http://uteric.github.io/R/R语言学习笔记-数据创建/</id>
    <published>2020-02-07T04:56:21.000Z</published>
    <updated>2020-02-07T04:56:21.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、直接读取文件中的数据"><a href="#一、直接读取文件中的数据" class="headerlink" title="一、直接读取文件中的数据"></a>一、直接读取文件中的数据</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#直接读取.csv文件，本地或网络文件都可以；</span></span><br><span class="line">data1 &lt;- read.table(<span class="string">"https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/1_OneNum.csv"</span>, header=TRUE)</span><br><span class="line">head(data1)</span><br><span class="line">price</span><br><span class="line">1    75</span><br><span class="line">2   104</span><br><span class="line">3   369</span><br><span class="line">4   300</span><br><span class="line">5    92</span><br><span class="line">6    64</span><br><span class="line"><span class="comment">#对比看一下header=FALSE的结果，列名将被当作第一行，需要特别注意；</span></span><br><span class="line">data1 &lt;- read.table(<span class="string">"https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/1_OneNum.csv"</span>, header=FALSE)</span><br><span class="line">head(data2)</span><br><span class="line">V1</span><br><span class="line">1 price</span><br><span class="line">2  75.0</span><br><span class="line">3 104.0</span><br><span class="line">4 369.0</span><br><span class="line">5 300.0</span><br><span class="line">6  92.0</span><br><span class="line"><span class="comment">#可以发现，这是一个只有一列的文件，列名为price，9996行；</span></span><br><span class="line"><span class="comment">#此类数据适合作「密度图」</span></span><br><span class="line"><span class="comment">#若要取出price中满足特定条件的数值，可以使用filter()函数，用法如下：</span></span><br><span class="line">p &lt;- filter(data,price&lt;100)</span><br><span class="line">nrow(p)</span><br><span class="line"><span class="comment">#[1] 4799</span></span><br><span class="line"><span class="comment">#也可以直接传递数值，如下：</span></span><br><span class="line">data %&gt;%</span><br><span class="line">filter( price&lt;300 ) %&gt;%</span><br></pre></td></tr></table></figure><h1 id="二、通过函数创建数据"><a href="#二、通过函数创建数据" class="headerlink" title="二、通过函数创建数据"></a>二、通过函数创建数据</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建数据框</span></span><br><span class="line"><span class="comment">#方法一：手动添加数据，仅在数据量小的情况下，谨慎使用；</span></span><br><span class="line">var1=c(<span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>,<span class="string">"D"</span>,<span class="string">"E"</span>) <span class="comment">#对于string，需要用""括起来；</span></span><br><span class="line">var2=c(3,5,1,10,8) <span class="comment">#对于numeric，不要使用"";</span></span><br><span class="line">data=data.frame (var1,var2)</span><br><span class="line">head(data)</span><br><span class="line">var1 var2</span><br><span class="line">1    A    3</span><br><span class="line">2    B    5</span><br><span class="line">3    C    1</span><br><span class="line">4    D   10</span><br><span class="line">5    E    8</span><br><span class="line"><span class="comment">#也可以使用如下方法创建数据框，效果是相同的；</span></span><br><span class="line">data &lt;- data.frame (</span><br><span class="line">var1=c(<span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>,<span class="string">"D"</span>,<span class="string">"E"</span>),</span><br><span class="line">var2=c(3,5,1,10,8)</span><br><span class="line">)</span><br><span class="line"><span class="comment">#此类数据有两列，一列为分类变量（categorical variable），一列为数值变量（numeric variable），适合作条形图，如；</span></span><br><span class="line">ggplot(data,aes(x=var1,y=var2))+geom_bar(<span class="built_in">stat</span>=<span class="string">"identity"</span>) <span class="comment">#stat="identity表明直接引用数据集里变量的值作为纵坐标的高度；</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#方法二：使用rnorm()函数，rnorm(n, mean = 0, sd = 1)，n为产生随机值个数，mean是平均数，sd是标准差；默认平均数为0，标准差为1，呈正态分布；</span></span><br><span class="line">var1=rnorm(100)</span><br><span class="line">var2=rnorm(100,mean=2,sd=0.5)</span><br><span class="line">head(var1)</span><br><span class="line">[1]  0.7376882  0.9055453 -0.1456011  0.8596800 -1.5881099  1.4858029 <span class="comment">#var1在0左右分布；</span></span><br><span class="line">head(var2)</span><br><span class="line">[1] 3.309464 2.371139 1.848107 2.126949 2.006115 2.082000 <span class="comment">#var2在2左右分布；</span></span><br><span class="line"><span class="comment">#创建数据框</span></span><br><span class="line">data &lt;- data.frame (var1,var2)</span><br><span class="line">head(data)</span><br><span class="line">var1     var2</span><br><span class="line">1  0.7376882 3.309464</span><br><span class="line">2  0.9055453 2.371139</span><br><span class="line">3 -0.1456011 1.848107</span><br><span class="line">4  0.8596800 2.126949</span><br><span class="line">5 -1.5881099 2.006115</span><br><span class="line">6  1.4858029 2.082000</span><br><span class="line"><span class="comment">#此类数据有两列，两列都是数值，适合作散点图；</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#方法三：使用sample(seq())函数创建数值变量；</span></span><br><span class="line">data &lt;- data.frame (</span><br><span class="line">var1=sample(seq(1,9),20,replace=T), <span class="comment">#replace=T，允许数值重复；</span></span><br><span class="line">var2=sample(seq(1,30),20,replace=F) <span class="comment">#replace=F，数值不能重复；</span></span><br><span class="line">)</span><br><span class="line">head(data)</span><br><span class="line">var1 var2</span><br><span class="line">1    3   16</span><br><span class="line">2    2    5</span><br><span class="line">3    3   28</span><br><span class="line">4    6   30</span><br><span class="line">5    2   10</span><br><span class="line">6    3   17</span><br><span class="line"></span><br><span class="line"><span class="comment">#方法四：使用sample()函数创建数值变量；</span></span><br><span class="line">data &lt;- data.frame (</span><br><span class="line">var1=sample(3:20,30,replace=T), <span class="comment">#3－20之间取30个数，允许重复；</span></span><br><span class="line">var2=sample(21:30,30,replace=T) <span class="comment">#21－30之间取30个数，允许重复；</span></span><br><span class="line">)</span><br><span class="line">head(data)</span><br><span class="line">var1 var2</span><br><span class="line">1   15   21</span><br><span class="line">2   14   21</span><br><span class="line">3   17   27</span><br><span class="line">4   10   29</span><br><span class="line">5    7   27</span><br><span class="line">6   12   24</span><br><span class="line"></span><br><span class="line"><span class="comment">#方法五：使用LETTERS创建字母；</span></span><br><span class="line">var1=letters[1:7] <span class="comment">#letters取小写字母；</span></span><br><span class="line">var2=LETTERS[8:14] <span class="comment">#LETTERS取大写字母；</span></span><br><span class="line">var1</span><br><span class="line">[1] <span class="string">"a"</span> <span class="string">"b"</span> <span class="string">"c"</span> <span class="string">"d"</span> <span class="string">"e"</span> <span class="string">"f"</span> <span class="string">"g"</span></span><br><span class="line">var2</span><br><span class="line">[1] <span class="string">"H"</span> <span class="string">"I"</span> <span class="string">"J"</span> <span class="string">"K"</span> <span class="string">"L"</span> <span class="string">"M"</span> <span class="string">"N"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#方法六：使用abs()函数取绝对值；</span></span><br><span class="line">var1=abs(rnorm(10,mean=0,sd=3))</span><br><span class="line">var1</span><br><span class="line">2.8804684 1.8650338 0.3870626 1.2668471 5.1131199 4.6320510 2.8822397 0.2476684 7.1651732 3.2236713</span><br><span class="line"></span><br><span class="line"><span class="comment">#方法七：使用seq()函数创建数值变量；</span></span><br><span class="line">var1=seq(1,9,length.out=10) <span class="comment"># 从1至9，产生10个数，两两之间是等距的；</span></span><br><span class="line">var2=seq(1,9,2) <span class="comment"># 从1至9，以2为间隔产生数列；</span></span><br><span class="line">var1</span><br><span class="line">1.000000 1.888889 2.777778 3.666667 4.555556 5.444444 6.333333 7.222222 8.111111 9.000000</span><br><span class="line">var2</span><br><span class="line">1 3 5 7 9</span><br><span class="line"></span><br><span class="line"><span class="comment">#方法八，使用paste()创建分类变量；</span></span><br><span class="line">var1=paste(<span class="string">"sample"</span>,seq(1,10),sep=<span class="string">""</span>) <span class="comment"># 结合字符串与数字，中间没有分隔；</span></span><br><span class="line">var2=paste(<span class="string">"sample"</span>,seq(1,10),sep=<span class="string">"-"</span>) <span class="comment"># 结合字符串与数字，中间以－分隔；</span></span><br><span class="line">var1</span><br><span class="line"><span class="string">"sample1"</span>  <span class="string">"sample2"</span>  <span class="string">"sample3"</span>  <span class="string">"sample4"</span>  <span class="string">"sample5"</span>  <span class="string">"sample6"</span> <span class="string">"sample7"</span>  <span class="string">"sample8"</span>  <span class="string">"sample9"</span>  <span class="string">"sample10"</span></span><br><span class="line">var2</span><br><span class="line"><span class="string">"sample-1"</span>  <span class="string">"sample-2"</span>  <span class="string">"sample-3"</span>  <span class="string">"sample-4"</span>  <span class="string">"sample-5"</span> <span class="string">"sample-6"</span>  <span class="string">"sample-7"</span>  <span class="string">"sample-8"</span>  <span class="string">"sample-9"</span>  <span class="string">"sample-10"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#方法九，使用mutate()函数向数据框末端追加一列；</span></span><br><span class="line">data &lt;- data.frame (</span><br><span class="line">var1=rnorm(200,mean=1,sd=1),</span><br><span class="line">var2=rnorm(200,mean=3,sd=0.3)</span><br><span class="line">)</span><br><span class="line">head(data)</span><br><span class="line">var1     var2</span><br><span class="line">1  1.39138057 2.816622</span><br><span class="line">2  1.19333387 3.243189</span><br><span class="line">3 -0.07646219 2.950697</span><br><span class="line">4 -0.39530844 2.954534</span><br><span class="line">5  0.52766461 2.923421</span><br><span class="line">6  0.34335782 2.870595</span><br><span class="line"><span class="comment">#下面使用mutate()函数追加新的一列var3;</span></span><br><span class="line">data &lt;-mutate(data,var3=paste(<span class="string">"sample"</span>,seq(1,200),sep=<span class="string">""</span>)) <span class="comment">#mutate()本身并不改变data的值，只会生成一个新的数据框，因此要重新对data赋值；</span></span><br><span class="line">&gt; head(data)</span><br><span class="line">var1     var2    var3</span><br><span class="line">1  1.39138057 2.816622 sample1</span><br><span class="line">2  1.19333387 3.243189 sample2</span><br><span class="line">3 -0.07646219 2.950697 sample3</span><br><span class="line">4 -0.39530844 2.954534 sample4</span><br><span class="line">5  0.52766461 2.923421 sample5</span><br><span class="line">6  0.34335782 2.870595 sample6</span><br><span class="line"></span><br><span class="line"><span class="comment"># mutate()也可以结合ifelse()函数追加分类；</span></span><br><span class="line">var1=sample(1:30,10,replace=T)</span><br><span class="line">var2=sample(31:45,10,replace=T)</span><br><span class="line">data &lt;- data.frame (var1,var2)</span><br><span class="line">var3=ifelse(var1&gt;15,<span class="string">"type1"</span>,<span class="string">"type2"</span>)</span><br><span class="line">data &lt;- mutate(data,var3) <span class="comment"># 或者可以写成，</span></span><br><span class="line">data</span><br><span class="line">var1 var2  var3</span><br><span class="line">1     1   35 type2</span><br><span class="line">2    10   37 type2</span><br><span class="line">3     1   44 type2</span><br><span class="line">4    26   37 type1</span><br><span class="line">5     1   35 type2</span><br><span class="line">6    16   42 type1</span><br><span class="line">7    12   45 type2</span><br><span class="line">8     5   31 type2</span><br><span class="line">9    26   41 type1</span><br><span class="line">10    8   43 type2</span><br><span class="line"></span><br><span class="line"><span class="comment">#方法十：使用rep()函数添加数值或分类变量；</span></span><br><span class="line">var1=rep(1:4,3)</span><br><span class="line">var2=rep(1:4,each=3)</span><br><span class="line">var3=rep(1:4,each=3,len=10)</span><br><span class="line">var1</span><br><span class="line">1 2 3 4 1 2 3 4 1 2 3 4</span><br><span class="line">var2</span><br><span class="line">1 1 1 2 2 2 3 3 3 4 4 4</span><br><span class="line">var3</span><br><span class="line">1 1 1 2 2 2 3 3 3 4</span><br><span class="line"><span class="comment">#同理，可以结合mutate()和rep()来追加分类变量；</span></span><br><span class="line">var1=sample(2:50,10,replace=T)</span><br><span class="line">var2=sample(40:60,10,replace=T)</span><br><span class="line">data &lt;- data.frame (var1,var2)</span><br><span class="line">var3=rep(c(<span class="string">"class1"</span>,<span class="string">"class2"</span>),each=5)</span><br><span class="line">data &lt;- mutate(data,var3)</span><br><span class="line">data</span><br><span class="line">var1 var2   var3</span><br><span class="line">1    49   58 class1</span><br><span class="line">2    39   47 class1</span><br><span class="line">3    18   47 class1</span><br><span class="line">4    17   54 class1</span><br><span class="line">5    25   52 class1</span><br><span class="line">6    22   43 class2</span><br><span class="line">7     4   59 class2</span><br><span class="line">8    23   45 class2</span><br><span class="line">9    41   47 class2</span><br><span class="line">10   43   40 class2</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;一、直接读取文件中的数据&quot;&gt;&lt;a href=&quot;#一、直接读取文件中的数据&quot; class=&quot;headerlink&quot; title=&quot;一、直接读取文件中的数据&quot;&gt;&lt;/a&gt;一、直接读取文件中的数据&lt;/h1&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;t
      
    
    </summary>
    
      <category term="编程语言" scheme="http://uteric.github.io/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="R语言" scheme="http://uteric.github.io/tags/R%E8%AF%AD%E8%A8%80/"/>
    
  </entry>
  
  <entry>
    <title>R可视化-绘制柱形图2</title>
    <link href="http://uteric.github.io/R/R%E5%8F%AF%E8%A7%86%E5%8C%96-%E7%BB%98%E5%88%B6%E6%9F%B1%E5%BD%A2%E5%9B%BE2/"/>
    <id>http://uteric.github.io/R/R可视化-绘制柱形图2/</id>
    <published>2020-02-07T04:37:57.000Z</published>
    <updated>2020-02-07T04:37:57.000Z</updated>
    
    <content type="html"><![CDATA[<p>首先，我们准备绘图数据，数据来源是2018年的一篇研究论文，<em>In Vitro and In Vivo Gene Therapy Vector Evolution via Multispecies Interbreeding and Retargeting of Adeno-Associated Viruses</em>，我们把数据输入到文件AAV infectivity.csv，并保存在工作目录下。</p><p>下面开始正式绘图：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2) <span class="comment"># 加载ggplot2</span></span><br><span class="line">data1=read.csv(<span class="string">"AAV infectivity.csv"</span>, header=T) <span class="comment"># 加载数据到变量data1</span></span><br><span class="line">head(data1,3) <span class="comment"># 查看data1前三行</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Cell.line Tissue.or.cell.type AAV.1 AAV.2  AAV.3   AAV.4  AAV.5</span><br><span class="line">1     Huh-7            hu liver  4000   500  20000 2000000 400000</span><br><span class="line">2       293           hu kidney  2000   500  20000  700000 400000</span><br><span class="line">3      HeLa           hu cervix 70000  2000 100000 2000000  30000</span><br></pre></td></tr></table></figure><p>以第一列为横坐标，第三列为纵坐标，绘制条形图：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pbar=ggplot(data1,aes(x=data1[,1],y=data1[,3]))+ <span class="comment"># 调用ggplot函数，以data1的第一列为横坐标，第三列为纵坐标，作为第一图层；</span></span><br><span class="line">geom_bar(<span class="built_in">stat</span>=<span class="string">"identity"</span>,position = <span class="string">"dodge"</span>,width=0.8,fill=<span class="string">"lightblue"</span>,color=<span class="string">"black"</span>)+ <span class="comment"># 第二图层：绘制条形图，位置为肩并肩，柱子的宽度为0.8，填充为浅蓝色，边框为黑色；</span></span><br><span class="line">geom_text(aes(label=paste(as.character(data1[,3]),sep=<span class="string">""</span>)),vjust=-0.5,size=4)+ <span class="comment"># 第三图层：将第三列数据绘制在柱子顶端，字号为4号；</span></span><br><span class="line">ggtitle(label=<span class="string">"In Vitro infectivities of AAV1"</span>,subtitle=<span class="string">"Data midified from [Grimm, D. et al. (2008). J. Virol. 82: 5887-5911]"</span>)+ <span class="comment"># 第四图层：设定标题与副标题；</span></span><br><span class="line">xlab(<span class="string">"Cells"</span>)+ <span class="comment"># 第五图层：X轴标签</span></span><br><span class="line">ylab(<span class="string">"In Vitro Infectivities of AAV1"</span>)+ <span class="comment"># 第六图层：Y轴标签；</span></span><br><span class="line">theme(plot.title = element_text(size=20,face=<span class="string">"bold"</span>,vjust=1,hjust=0.5), <span class="comment"># 第七图层：设定标题，字号20号，粗体，以及对齐方式；</span></span><br><span class="line">axis.title.x = element_text(size=15,face=<span class="string">"bold"</span>,vjust=0.5,hjust=0.5), <span class="comment"># 第七图层：X轴标签，字号15号，粗体，水平垂直居中；</span></span><br><span class="line">axis.title.y = element_text(size=15,face=<span class="string">"bold"</span>,vjust=1,hjust=0.5), <span class="comment"># 第七图层：Y轴标签，字号15号，粗体，水平居中；</span></span><br><span class="line">axis.text.x=element_text(size=12,face=<span class="string">"bold"</span>,vjust=1,hjust=1,angle=45), <span class="comment"># 第七图层：X轴文字，字号12号，粗体，45度倾斜；</span></span><br><span class="line">axis.text.y=element_text(size=12,face=<span class="string">"bold"</span>,vjust=0.5,hjust=0.5), <span class="comment"># 第七图层：Y轴文字，字号12号，粗体，水平垂直居中；</span></span><br><span class="line">panel.background = element_rect(fill=<span class="string">"transparent"</span>,color=<span class="string">"black"</span>), <span class="comment"># 第七图层：背景颜色透明，边框黑色；</span></span><br><span class="line">panel.grid.minor = element_blank(), <span class="comment"># 第七图层：次网格线隐藏；</span></span><br><span class="line">panel.grid.major = element_blank()) <span class="comment"># 第七图层：主网格线隐藏；</span></span><br><span class="line">pbar <span class="comment"># 绘制条形图</span></span><br></pre></td></tr></table></figure><p>如果需要对数据进行排序并绘制条形图，可以首先对第三列从大到小排序，命令如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data1=data1[order(data1[,3],decreasing = T),] <span class="comment"># 对第三列进行降序排列；</span></span><br><span class="line">head(data1,3) <span class="comment"># 查看前三行；</span></span><br></pre></td></tr></table></figure><p>以第三列从大到小排序后的data1如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Cell.line Tissue.or.cell.type   AAV.1 AAV.2  AAV.3    AAV.4   AAV.5</span><br><span class="line">4      HepG2            hu liver 2000000 50000 300000 20000000 3000000</span><br><span class="line">10    NIH3T3      mu fibroblasts  200000 20000 700000   700000 7000000</span><br><span class="line">3       HeLa           hu cervix   70000  2000 100000  2000000   30000</span><br></pre></td></tr></table></figure><p>然而，此时绘制条形图，图形却不会从大到小排列，需要对第一列进行排列，</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data1[,1]=factor(data1[,1],levels=data1[,1],order=T) <span class="comment"># 对第一列排序；</span></span><br></pre></td></tr></table></figure><p>再次调用ggplot作图，就会得到降序排列的条形图。</p><p>最后，保存图片为PDF格式，命令如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ggsave(pbar,filename=<span class="string">"in vitro AAV1-order.pdf"</span>,width=12,height=9)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;首先，我们准备绘图数据，数据来源是2018年的一篇研究论文，&lt;em&gt;In Vitro and In Vivo Gene Therapy Vector Evolution via Multispecies Interbreeding and Retargeting of Ad
      
    
    </summary>
    
      <category term="编程语言" scheme="http://uteric.github.io/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="R可视化" scheme="http://uteric.github.io/tags/R%E5%8F%AF%E8%A7%86%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>R可视化-绘制柱形图1</title>
    <link href="http://uteric.github.io/R/R_visualize_bar1/"/>
    <id>http://uteric.github.io/R/R_visualize_bar1/</id>
    <published>2020-02-07T04:37:51.000Z</published>
    <updated>2020-02-07T04:37:51.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、模拟数据-＃"><a href="#一、模拟数据-＃" class="headerlink" title="一、模拟数据 ＃"></a>一、模拟数据 ＃</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">data &lt;- data.frame(</span><br><span class="line">samplename=letters[1:6], <span class="comment"># 变量samplename，赋值从字母A－F；</span></span><br><span class="line">samplevalue=sample(seq(3,12),6) <span class="comment">#变量samplevalue，赋值为3－12之间的随机数；</span></span><br><span class="line">)</span><br><span class="line">data <span class="comment"># 查看data，如下：</span></span><br><span class="line">samplename samplevalue</span><br><span class="line">1          a           6</span><br><span class="line">2          b           7</span><br><span class="line">3          c          10</span><br><span class="line">4          d          12</span><br><span class="line">5          e           4</span><br><span class="line">6          f           9</span><br></pre></td></tr></table></figure><h1 id="二、绘制柱形图"><a href="#二、绘制柱形图" class="headerlink" title="二、绘制柱形图"></a>二、绘制柱形图</h1><p>2.1 基本柱形图</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">barplot(height=data<span class="variable">$samplevalue</span>,</span><br><span class="line">names=data<span class="variable">$samplename</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><img src="/images/R/barplot01.png" alt></p><p>2.2 单一颜色</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">barplot(height=data<span class="variable">$samplevalue</span>,</span><br><span class="line">names=data<span class="variable">$samplename</span>,</span><br><span class="line">col=<span class="string">"red"</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><img src="/images/R/barplot02.png" alt></p><p>2.3 边框颜色</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">barplot(height=data<span class="variable">$samplevalue</span>,</span><br><span class="line">names=data<span class="variable">$samplename</span>,</span><br><span class="line">col=<span class="string">"red"</span>,</span><br><span class="line">border=<span class="string">"blue"</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><img src="/images/R/barplot03.png" alt></p><p>2.4 从调色板填充颜色</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">library(RColorBrewer)</span><br><span class="line"></span><br><span class="line">cols &lt;- brewer.pal(6,<span class="string">"Paired"</span>)</span><br><span class="line">barplot(height=data<span class="variable">$samplevalue</span>,</span><br><span class="line">names=data<span class="variable">$samplename</span>,</span><br><span class="line">col=cols,</span><br><span class="line">border=<span class="string">"blue"</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><img src="/images/R/barplot04.png" alt></p><p>2.5 添加主标题，X轴标题，Y轴标题，设定Y轴刻度限度</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cols &lt;- brewer.pal(6,<span class="string">"Paired"</span>)</span><br><span class="line">barplot(height=data<span class="variable">$samplevalue</span>,</span><br><span class="line">names=data<span class="variable">$samplename</span>,</span><br><span class="line">col=cols,</span><br><span class="line">border=<span class="string">"blue"</span>,</span><br><span class="line">main=<span class="string">"My title"</span>,</span><br><span class="line">xlab=<span class="string">"Name"</span>,</span><br><span class="line">ylab=<span class="string">"Value"</span>,</span><br><span class="line">ylim=c(0,13)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><img src="/images/R/barplot05.png" alt></p><p>2.6 调整为水平柱形图，设定坐标轴文字方向</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">barplot(height=data<span class="variable">$samplevalue</span>,</span><br><span class="line">names=data<span class="variable">$samplename</span>,</span><br><span class="line">col=cols,</span><br><span class="line">border=<span class="string">"blue"</span>,</span><br><span class="line">main=<span class="string">"My title"</span>,</span><br><span class="line">xlab=<span class="string">"Name"</span>,</span><br><span class="line">ylab=<span class="string">"Value"</span>,</span><br><span class="line">ylim=c(0,13),</span><br><span class="line">horiz=T,</span><br><span class="line">las=2</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><img src="/images/R/barplot06.png" alt></p><p>2.7 坐标轴颜色，字体，字号</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">barplot(height=data<span class="variable">$samplevalue</span>,</span><br><span class="line">names=data<span class="variable">$samplename</span>,</span><br><span class="line">col=cols,</span><br><span class="line">border=<span class="string">"blue"</span>,</span><br><span class="line">main=<span class="string">"My title"</span>,</span><br><span class="line">xlab=<span class="string">"Name"</span>,</span><br><span class="line">ylab=<span class="string">"Value"</span>,</span><br><span class="line">ylim=c(0,13),</span><br><span class="line">col.axis=<span class="string">"green"</span>, </span><br><span class="line">font.axis=2, </span><br><span class="line">cex.axis=1 </span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><img src="/images/R/barplot07.png" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;一、模拟数据-＃&quot;&gt;&lt;a href=&quot;#一、模拟数据-＃&quot; class=&quot;headerlink&quot; title=&quot;一、模拟数据 ＃&quot;&gt;&lt;/a&gt;一、模拟数据 ＃&lt;/h1&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td cla
      
    
    </summary>
    
      <category term="编程语言" scheme="http://uteric.github.io/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="R可视化" scheme="http://uteric.github.io/tags/R%E5%8F%AF%E8%A7%86%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>R可视化-雷达图</title>
    <link href="http://uteric.github.io/R/R_visualize_radar/"/>
    <id>http://uteric.github.io/R/R_visualize_radar/</id>
    <published>2020-02-07T03:12:13.000Z</published>
    <updated>2020-02-07T03:12:13.000Z</updated>
    
    <content type="html"><![CDATA[<p>雷达图（radar, spider, or web plot），可以使用R中的fmsb程序包构建；</p><p>适合作雷达图的数据是极特别的，只有一行，同时需要对列进行命名；作图之前，需要在数据中添加额外两行，第一行表示最大值，第二行表示最小值；</p><p>数据准备就绪后，加载fmsb，并使用radarchart()函数作图即可；</p><h1 id="一、简单的雷达图"><a href="#一、简单的雷达图" class="headerlink" title="一、简单的雷达图"></a>一、简单的雷达图</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&gt; library(fmsb)</span><br><span class="line"><span class="comment"># 作图数据</span></span><br><span class="line">&gt; var1 &lt;- sample(3:25,15,replace=T)</span><br><span class="line">&gt; var1</span><br><span class="line">[1] 18 20 18 25 23 15 19 12 20 21  3  5 22 21 15</span><br><span class="line"><span class="comment"># 通过矩阵平铺成一行；</span></span><br><span class="line">&gt; data &lt;- matrix(var1,nrow=1)</span><br><span class="line">&gt; data</span><br><span class="line">[,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14] [,15]</span><br><span class="line">[1,]   18   20   18   25   23   15   19   12   20    21     3     5    22    21    15</span><br><span class="line"><span class="comment"># 转化为数据框，以增加数据类型；   </span></span><br><span class="line">&gt; data &lt;- as.data.frame(data)</span><br><span class="line">&gt; data</span><br><span class="line">V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15</span><br><span class="line">1 18 20 18 25 23 15 19 12 20  21   3   5  22  21  15</span><br><span class="line"><span class="comment"># 更改列名；</span></span><br><span class="line">&gt; colnames(data) &lt;- LETTERS[1:15]</span><br><span class="line">&gt; data</span><br><span class="line">A  B  C  D  E  F  G  H  I  J K L  M  N  O</span><br><span class="line">1 18 20 18 25 23 15 19 12 20 21 3 5 22 21 15</span><br><span class="line"><span class="comment"># 定义最大值与最小值；</span></span><br><span class="line">&gt; var2 &lt;- rep(25,15)</span><br><span class="line">&gt; var3 &lt;- rep(0,15)</span><br><span class="line">&gt; var2</span><br><span class="line">[1] 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25</span><br><span class="line">&gt; var3</span><br><span class="line">[1] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span><br><span class="line"><span class="comment"># 加入到数据框前两行中，注意顺序；</span></span><br><span class="line">&gt; data &lt;- rbind(var2,var3,data)</span><br><span class="line">&gt; data</span><br><span class="line">A  B  C  D  E  F  G  H  I  J  K  L  M  N  O</span><br><span class="line">1 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25</span><br><span class="line">2  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0</span><br><span class="line">3 18 20 18 25 23 15 19 12 20 21  3  5 22 21 15</span><br><span class="line"><span class="comment"># 最后一步，作图；</span></span><br><span class="line">&gt; p &lt;- radarchart(data)</span><br></pre></td></tr></table></figure><p><img src="/images/R/radar01.png" alt></p><h1 id="二、图形优化"><a href="#二、图形优化" class="headerlink" title="二、图形优化"></a>二、图形优化</h1><p>主要参数如下：<br>axistype，坐标轴类型，[0:5]， 0=无标签；1=中心标签；2=周围标签；3=中心与周围标签；4=标签1的分数形式；5=标签3的分数形式；<br>seg，每个轴的段数，默认为4；<br>pty，数据点符号，默认16，若指定32，即不加点；<br>pcol，连接各点的外框线的颜色，默认[1：8]，1=黑色，2=红色，3=绿色，4=蓝色，5=兰色，6=紫色，7=黄色，8=灰色；<br>plty，连接各点的外框线的类型，默认[1：6]，1=实线，[2:6]=虚线；<br>plwd，连接各点的外框线的宽度；<br>pfcol，外框线圈住的面积中的填充色；<br>cglcol，网格线的颜色；<br>cglwd，网格线的宽度，默认为1；<br>cglty，网格线的类型：1=实线；2=虚线；3=细虚线；4=致密虚线，默认为3；<br>axislabcol，坐标轴标签的颜色；<br>casixlables，坐标轴刻度，定义最小值，最大值，以及刻度宽度；<br>title，标题；<br>centerzero，默认为FALSE，否则从（0，0）为中心作图；<br>vlcex，组标签字体大小；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">radarchart(data,</span><br><span class="line">axistype=1,seg=5,</span><br><span class="line">pty=16,pcol=rgb(0.2,0.5,0.5,0.9),plty=7,pfcol=rgb(0.2,0.5,0.5,0.5),plwd=3,</span><br><span class="line">cglcol=<span class="string">"grey"</span>,cglty=1,axislabcol=<span class="string">"blue"</span>,cglwd=1.5,caxislabels=seq(0,30,5),</span><br><span class="line">vlcex=0.8,title=<span class="string">"Radar Plot"</span>)</span><br></pre></td></tr></table></figure><p><img src="/images/R/radar02.png" alt></p><h1 id="三、多组叠加"><a href="#三、多组叠加" class="headerlink" title="三、多组叠加"></a>三、多组叠加</h1><p>注意：尽管多个雷达图可以叠加，但是不要叠加超过3层，否则会造成阅读困难；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据方面，我们把刚才的数据稍作修改，再添加两行进去即可；</span></span><br><span class="line">var1 &lt;- sample(3:50,24,replace=T)</span><br><span class="line">data &lt;- matrix(var1,nrow=3)</span><br><span class="line">data &lt;- as.data.frame(data)</span><br><span class="line">colnames(data) &lt;- LETTERS[1:8]</span><br><span class="line">rownames(data) &lt;- paste(<span class="string">"sample"</span>,letters[1:3],sep=<span class="string">"-"</span>)</span><br><span class="line">var2 &lt;- rep(50,8)</span><br><span class="line">var3 &lt;- rep(0,8)</span><br><span class="line">data &lt;- rbind(var2,var3,data)</span><br><span class="line">data</span><br><span class="line">radarchart(data)</span><br></pre></td></tr></table></figure><p><img src="/images/R/radar03.png" alt></p><p>对雷达图进行优化，主要是控制颜色；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">color_line=c(rgb(0.2,0.5,0.5,0.9), rgb(0.8,0.2,0.5,0.9) , rgb(0.7,0.5,0.1,0.9))</span><br><span class="line">color_fill=c(rgb(0.2,0.5,0.5,0.4), rgb(0.8,0.2,0.5,0.4) , rgb(0.7,0.5,0.1,0.4))</span><br><span class="line">radarchart(data,</span><br><span class="line">axistype=1,seg=5,</span><br><span class="line">pty=16,pcol=color_line,plty=7,pfcol=color_fill,plwd=3,</span><br><span class="line">cglcol=<span class="string">"grey"</span>,cglty=1,axislabcol=<span class="string">"grey"</span>,cglwd=1.5,caxislabels=seq(0,50,10),</span><br><span class="line">vlcex=1.2,title=<span class="string">"Multi-Radar Plot"</span>)</span><br><span class="line"><span class="comment"># 多个图叠加时需要加上图例，否则让人不知所云；</span></span><br><span class="line">legend(x=0.9,y=1.2,legend=rownames(data[c(3,4,5),]),bty = <span class="string">"n"</span>, pch=20 , col=color_line , text.col=color_line, cex=1, pt.cex=1.5)</span><br><span class="line"><span class="comment"># 到此为止吧，雷达图尽在于此了。</span></span><br></pre></td></tr></table></figure><p><img src="/images/R/radar04.png" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;雷达图（radar, spider, or web plot），可以使用R中的fmsb程序包构建；&lt;/p&gt;
&lt;p&gt;适合作雷达图的数据是极特别的，只有一行，同时需要对列进行命名；作图之前，需要在数据中添加额外两行，第一行表示最大值，第二行表示最小值；&lt;/p&gt;
&lt;p&gt;数据准备就
      
    
    </summary>
    
      <category term="编程语言" scheme="http://uteric.github.io/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="R可视化" scheme="http://uteric.github.io/tags/R%E5%8F%AF%E8%A7%86%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>R语言学习笔记-数据类型：向量，矩阵，数组，数据框，列表</title>
    <link href="http://uteric.github.io/R/R%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%9A%E5%90%91%E9%87%8F%EF%BC%8C%E7%9F%A9%E9%98%B5%EF%BC%8C%E6%95%B0%E7%BB%84%EF%BC%8C%E6%95%B0%E6%8D%AE%E6%A1%86%EF%BC%8C%E5%88%97%E8%A1%A8/"/>
    <id>http://uteric.github.io/R/R语言学习笔记-数据类型：向量，矩阵，数组，数据框，列表/</id>
    <published>2020-02-07T03:06:08.000Z</published>
    <updated>2020-02-07T03:06:08.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、向量-vector"><a href="#一、向量-vector" class="headerlink" title="一、向量(vector)"></a>一、向量(vector)</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&gt; A &lt;- c(1,2,3,4,5,6)</span><br><span class="line">&gt; B &lt;- c(<span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>,<span class="string">"D"</span>,<span class="string">"E"</span>)</span><br><span class="line">&gt; A</span><br><span class="line">[1] 1 2 3 4 5 6</span><br><span class="line">&gt; B</span><br><span class="line">[1] <span class="string">"A"</span> <span class="string">"B"</span> <span class="string">"C"</span> <span class="string">"D"</span> <span class="string">"E"</span></span><br><span class="line">&gt; class(A)</span><br><span class="line">[1] <span class="string">"numeric"</span></span><br><span class="line">&gt; mode(A)</span><br><span class="line">[1] <span class="string">"numeric"</span></span><br><span class="line">&gt; typeof(A)</span><br><span class="line">[1] <span class="string">"double"</span></span><br><span class="line">&gt; class(B)</span><br><span class="line">[1] <span class="string">"character"</span></span><br><span class="line">&gt; mode(B)</span><br><span class="line">[1] <span class="string">"character"</span></span><br><span class="line">&gt; typeof(B)</span><br><span class="line">[1] <span class="string">"character"</span></span><br></pre></td></tr></table></figure><h1 id="二、矩阵（matrix）"><a href="#二、矩阵（matrix）" class="headerlink" title="二、矩阵（matrix）"></a>二、矩阵（matrix）</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&gt; var1=sample(31:60,25,replace=T)</span><br><span class="line"><span class="comment"># 矩阵的元素类型是一致的，或数值，或字符串；维度为二，即二维数组；</span></span><br><span class="line">&gt; C &lt;- matrix(var1,nrow=5)</span><br><span class="line">&gt; C</span><br><span class="line">[,1] [,2] [,3] [,4] [,5]</span><br><span class="line">[1,]   43   32   54   41   56</span><br><span class="line">[2,]   56   45   37   57   38</span><br><span class="line">[3,]   50   50   40   32   50</span><br><span class="line">[4,]   34   56   49   36   42</span><br><span class="line">[5,]   56   41   33   40   46</span><br><span class="line"></span><br><span class="line">&gt; class(C)</span><br><span class="line">[1] <span class="string">"matrix"</span></span><br><span class="line">&gt; mode(C)</span><br><span class="line">[1] <span class="string">"numeric"</span></span><br><span class="line">&gt; typeof(C)</span><br><span class="line">[1] <span class="string">"integer"</span></span><br></pre></td></tr></table></figure><h1 id="三、数组（array）"><a href="#三、数组（array）" class="headerlink" title="三、数组（array）"></a>三、数组（array）</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建向量var2；</span></span><br><span class="line">&gt; var2 &lt;- sample(1:100,81)</span><br><span class="line">&gt; var2</span><br><span class="line">[1]  87  66  38  84  95  19  29  32  72  98  70  37  53  54  16  15  64  58   2</span><br><span class="line">[20]  91  11  81  57  35  18  69  61  62  74  40  76  96  73  85  22  44  31   6</span><br><span class="line">[39]  51  36  25  82  77  97  10  27  39  24  79  55  78   7  30  92  49  63  20</span><br><span class="line">[58]  99  56  65  46  60  28  13   4  83   1  94  59  52  86  48 100  88  34  23</span><br><span class="line">[77]  71  67  47   3  89</span><br><span class="line">&gt; class(var2)</span><br><span class="line">[1] <span class="string">"integer"</span></span><br><span class="line">&gt; mode(var2)</span><br><span class="line">[1] <span class="string">"numeric"</span></span><br><span class="line">&gt; typeof(var2)</span><br><span class="line">[1] <span class="string">"integer"</span></span><br><span class="line"><span class="comment"># 创建数组C；数组的维数不限,但数据类型必须一致,即或都是数值，或都是字符串；</span></span><br><span class="line">&gt; C &lt;- array(var2,dim=c(3,3,9))</span><br><span class="line">&gt; C</span><br><span class="line">, , 1</span><br><span class="line"></span><br><span class="line">[,1] [,2] [,3]</span><br><span class="line">[1,]   87   84   29</span><br><span class="line">[2,]   66   95   32</span><br><span class="line">[3,]   38   19   72</span><br><span class="line"></span><br><span class="line">, , 2</span><br><span class="line"></span><br><span class="line">[,1] [,2] [,3]</span><br><span class="line">[1,]   98   53   15</span><br><span class="line">[2,]   70   54   64</span><br><span class="line">[3,]   37   16   58</span><br><span class="line"></span><br><span class="line">, , 3</span><br><span class="line"></span><br><span class="line">[,1] [,2] [,3]</span><br><span class="line">[1,]    2   81   18</span><br><span class="line">[2,]   91   57   69</span><br><span class="line">[3,]   11   35   61</span><br><span class="line"></span><br><span class="line">, , 4</span><br><span class="line"></span><br><span class="line">[,1] [,2] [,3]</span><br><span class="line">[1,]   62   76   85</span><br><span class="line">[2,]   74   96   22</span><br><span class="line">[3,]   40   73   44</span><br><span class="line"></span><br><span class="line">, , 5</span><br><span class="line"></span><br><span class="line">[,1] [,2] [,3]</span><br><span class="line">[1,]   31   36   77</span><br><span class="line">[2,]    6   25   97</span><br><span class="line">[3,]   51   82   10</span><br><span class="line"></span><br><span class="line">, , 6</span><br><span class="line"></span><br><span class="line">[,1] [,2] [,3]</span><br><span class="line">[1,]   27   79    7</span><br><span class="line">[2,]   39   55   30</span><br><span class="line">[3,]   24   78   92</span><br><span class="line"></span><br><span class="line">, , 7</span><br><span class="line"></span><br><span class="line">[,1] [,2] [,3]</span><br><span class="line">[1,]   49   99   46</span><br><span class="line">[2,]   63   56   60</span><br><span class="line">[3,]   20   65   28</span><br><span class="line"></span><br><span class="line">, , 8</span><br><span class="line"></span><br><span class="line">[,1] [,2] [,3]</span><br><span class="line">[1,]   13    1   52</span><br><span class="line">[2,]    4   94   86</span><br><span class="line">[3,]   83   59   48</span><br><span class="line"></span><br><span class="line">, , 9</span><br><span class="line"></span><br><span class="line">[,1] [,2] [,3]</span><br><span class="line">[1,]  100   23   47</span><br><span class="line">[2,]   88   71    3</span><br><span class="line">[3,]   34   67   89</span><br><span class="line"><span class="comment"># 查看类型；</span></span><br><span class="line">&gt; class(C)</span><br><span class="line">[1] <span class="string">"array"</span></span><br><span class="line">&gt; mode(C)</span><br><span class="line">[1] <span class="string">"numeric"</span></span><br><span class="line">&gt; typeof(C)</span><br><span class="line">[1] <span class="string">"integer"</span></span><br></pre></td></tr></table></figure><h1 id="四、数据框（data-frame）"><a href="#四、数据框（data-frame）" class="headerlink" title="四、数据框（data.frame）"></a>四、数据框（data.frame）</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&gt; var3 &lt;- LETTERS[1:8]</span><br><span class="line">&gt; var4 &lt;- sample(3:12,8,replace=T)</span><br><span class="line"><span class="comment"># 数据框的元素类型可不一致，但组成数据框的向量的维数必须相等；</span></span><br><span class="line">&gt; D &lt;- data.frame(var3,var4)</span><br><span class="line">&gt; D</span><br><span class="line">var3 var4</span><br><span class="line">1    A   11</span><br><span class="line">2    B   10</span><br><span class="line">3    C    9</span><br><span class="line">4    D    6</span><br><span class="line">5    E   10</span><br><span class="line">6    F   11</span><br><span class="line">7    G    7</span><br><span class="line">8    H   10</span><br><span class="line"><span class="comment"># 查看类型；</span></span><br><span class="line">&gt; class(D)</span><br><span class="line">[1] <span class="string">"data.frame"</span></span><br><span class="line">&gt; mode(D)</span><br><span class="line">[1] <span class="string">"list"</span></span><br><span class="line">&gt; typeof(D)</span><br><span class="line">[1] <span class="string">"list"</span></span><br></pre></td></tr></table></figure><h1 id="五、列表（list）"><a href="#五、列表（list）" class="headerlink" title="五、列表（list）"></a>五、列表（list）</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 列表是一个集合，数据类型可不一致，长度也可不一致，可以由向量，矩阵，数组，数据框，函数，甚至是列表组成；</span></span><br><span class="line">&gt; E &lt;- list(A,B,C,D)</span><br><span class="line">&gt; E</span><br><span class="line">[[1]]</span><br><span class="line">[1] 1 2 3 4 5 6</span><br><span class="line"></span><br><span class="line">[[2]]</span><br><span class="line">[1] <span class="string">"A"</span> <span class="string">"B"</span> <span class="string">"C"</span> <span class="string">"D"</span> <span class="string">"E"</span></span><br><span class="line"></span><br><span class="line">[[3]]</span><br><span class="line">, , 1</span><br><span class="line"></span><br><span class="line">[,1] [,2] [,3]</span><br><span class="line">[1,]   87   84   29</span><br><span class="line">[2,]   66   95   32</span><br><span class="line">[3,]   38   19   72</span><br><span class="line"></span><br><span class="line">, , 2</span><br><span class="line"></span><br><span class="line">[,1] [,2] [,3]</span><br><span class="line">[1,]   98   53   15</span><br><span class="line">[2,]   70   54   64</span><br><span class="line">[3,]   37   16   58</span><br><span class="line"></span><br><span class="line">, , 3</span><br><span class="line"></span><br><span class="line">[,1] [,2] [,3]</span><br><span class="line">[1,]    2   81   18</span><br><span class="line">[2,]   91   57   69</span><br><span class="line">[3,]   11   35   61</span><br><span class="line"></span><br><span class="line">, , 4</span><br><span class="line"></span><br><span class="line">[,1] [,2] [,3]</span><br><span class="line">[1,]   62   76   85</span><br><span class="line">[2,]   74   96   22</span><br><span class="line">[3,]   40   73   44</span><br><span class="line"></span><br><span class="line">, , 5</span><br><span class="line"></span><br><span class="line">[,1] [,2] [,3]</span><br><span class="line">[1,]   31   36   77</span><br><span class="line">[2,]    6   25   97</span><br><span class="line">[3,]   51   82   10</span><br><span class="line"></span><br><span class="line">, , 6</span><br><span class="line"></span><br><span class="line">[,1] [,2] [,3]</span><br><span class="line">[1,]   27   79    7</span><br><span class="line">[2,]   39   55   30</span><br><span class="line">[3,]   24   78   92</span><br><span class="line"></span><br><span class="line">, , 7</span><br><span class="line"></span><br><span class="line">[,1] [,2] [,3]</span><br><span class="line">[1,]   49   99   46</span><br><span class="line">[2,]   63   56   60</span><br><span class="line">[3,]   20   65   28</span><br><span class="line"></span><br><span class="line">, , 8</span><br><span class="line"></span><br><span class="line">[,1] [,2] [,3]</span><br><span class="line">[1,]   13    1   52</span><br><span class="line">[2,]    4   94   86</span><br><span class="line">[3,]   83   59   48</span><br><span class="line"></span><br><span class="line">, , 9</span><br><span class="line"></span><br><span class="line">[,1] [,2] [,3]</span><br><span class="line">[1,]  100   23   47</span><br><span class="line">[2,]   88   71    3</span><br><span class="line">[3,]   34   67   89</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[[4]]</span><br><span class="line">var3 var4</span><br><span class="line">1    A   11</span><br><span class="line">2    B   10</span><br><span class="line">3    C    9</span><br><span class="line">4    D    6</span><br><span class="line">5    E   10</span><br><span class="line">6    F   11</span><br><span class="line">7    G    7</span><br><span class="line">8    H   10</span><br><span class="line"><span class="comment"># 查看类型；</span></span><br><span class="line">&gt; class(E)</span><br><span class="line">[1] <span class="string">"list"</span></span><br><span class="line">&gt; mode(E)</span><br><span class="line">[1] <span class="string">"list"</span></span><br><span class="line">&gt; typeof(E)</span><br><span class="line">[1] <span class="string">"list"</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;一、向量-vector&quot;&gt;&lt;a href=&quot;#一、向量-vector&quot; class=&quot;headerlink&quot; title=&quot;一、向量(vector)&quot;&gt;&lt;/a&gt;一、向量(vector)&lt;/h1&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;tab
      
    
    </summary>
    
      <category term="编程语言" scheme="http://uteric.github.io/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="R语言" scheme="http://uteric.github.io/tags/R%E8%AF%AD%E8%A8%80/"/>
    
  </entry>
  
  <entry>
    <title>R语言学习笔记-矩阵的创建与操作方法</title>
    <link href="http://uteric.github.io/R/R%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%9F%A9%E9%98%B5%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8E%E6%93%8D%E4%BD%9C%E6%96%B9%E6%B3%95/"/>
    <id>http://uteric.github.io/R/R语言学习笔记-矩阵的创建与操作方法/</id>
    <published>2020-02-07T03:03:52.000Z</published>
    <updated>2020-02-07T03:03:52.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、创建矩阵"><a href="#一、创建矩阵" class="headerlink" title="一、创建矩阵"></a>一、创建矩阵</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建两个数字变量</span></span><br><span class="line">var5=sample(31:60,25,replace=T)</span><br><span class="line">var6=sample(1:30,25,replace=T)</span><br><span class="line"><span class="comment"># 创建两个5行5列的矩阵，创建5行5列的矩阵的原因，是为了方便说明问题；</span></span><br><span class="line">A &lt;- matrix(var5,nrow=5)</span><br><span class="line">B &lt;- matrix(var6,nrow=5)</span><br><span class="line">&gt; A</span><br><span class="line">[,1] [,2] [,3] [,4] [,5]</span><br><span class="line">[1,]   43   32   54   41   56</span><br><span class="line">[2,]   56   45   37   57   38</span><br><span class="line">[3,]   50   50   40   32   50</span><br><span class="line">[4,]   34   56   49   36   42</span><br><span class="line">[5,]   56   41   33   40   46</span><br><span class="line">&gt; B</span><br><span class="line">[,1] [,2] [,3] [,4] [,5]</span><br><span class="line">[1,]   18   21   23    1   18</span><br><span class="line">[2,]   18    5   23   10    5</span><br><span class="line">[3,]   26    6   26    8   26</span><br><span class="line">[4,]    7    5    7   16   15</span><br><span class="line">[5,]   29   20    1   15    2</span><br></pre></td></tr></table></figure><h1 id="二、操作矩阵"><a href="#二、操作矩阵" class="headerlink" title="二、操作矩阵"></a>二、操作矩阵</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 结合矩阵A与B的行，A先B后；</span></span><br><span class="line">C &lt;- rbind(A,B)</span><br><span class="line"><span class="comment"># 结合矩阵A与B的行，B先A后；</span></span><br><span class="line">D &lt;- rbind(B,A)</span><br><span class="line"><span class="comment"># 结合矩阵A与B的列，A先B后；</span></span><br><span class="line">E &lt;- cbind(A,B)</span><br><span class="line"><span class="comment"># 结合矩阵A与B的列，B先A后；</span></span><br><span class="line">F &lt;- cbind(B,A)</span><br><span class="line">&gt; C</span><br><span class="line">[,1] [,2] [,3] [,4] [,5]</span><br><span class="line">[1,]   43   32   54   41   56</span><br><span class="line">[2,]   56   45   37   57   38</span><br><span class="line">[3,]   50   50   40   32   50</span><br><span class="line">[4,]   34   56   49   36   42</span><br><span class="line">[5,]   56   41   33   40   46</span><br><span class="line">[6,]   18   21   23    1   18</span><br><span class="line">[7,]   18    5   23   10    5</span><br><span class="line">[8,]   26    6   26    8   26</span><br><span class="line">[9,]    7    5    7   16   15</span><br><span class="line">[10,]   29   20    1   15    2</span><br><span class="line">&gt; D</span><br><span class="line">[,1] [,2] [,3] [,4] [,5]</span><br><span class="line">[1,]   18   21   23    1   18</span><br><span class="line">[2,]   18    5   23   10    5</span><br><span class="line">[3,]   26    6   26    8   26</span><br><span class="line">[4,]    7    5    7   16   15</span><br><span class="line">[5,]   29   20    1   15    2</span><br><span class="line">[6,]   43   32   54   41   56</span><br><span class="line">[7,]   56   45   37   57   38</span><br><span class="line">[8,]   50   50   40   32   50</span><br><span class="line">[9,]   34   56   49   36   42</span><br><span class="line">[10,]   56   41   33   40   46</span><br><span class="line">&gt; E</span><br><span class="line">[,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span><br><span class="line">[1,]   43   32   54   41   56   18   21   23    1    18</span><br><span class="line">[2,]   56   45   37   57   38   18    5   23   10     5</span><br><span class="line">[3,]   50   50   40   32   50   26    6   26    8    26</span><br><span class="line">[4,]   34   56   49   36   42    7    5    7   16    15</span><br><span class="line">[5,]   56   41   33   40   46   29   20    1   15     2</span><br><span class="line">&gt; F</span><br><span class="line">[,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span><br><span class="line">[1,]   18   21   23    1   18   43   32   54   41    56</span><br><span class="line">[2,]   18    5   23   10    5   56   45   37   57    38</span><br><span class="line">[3,]   26    6   26    8   26   50   50   40   32    50</span><br><span class="line">[4,]    7    5    7   16   15   34   56   49   36    42</span><br><span class="line">[5,]   29   20    1   15    2   56   41   33   40    46</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选取矩阵A中的单个元素</span></span><br><span class="line">&gt; A[2,3]</span><br><span class="line">[1] 37</span><br><span class="line"><span class="comment"># 选取整行；</span></span><br><span class="line">&gt; A[3,]</span><br><span class="line">[1] 50 50 40 32 50</span><br><span class="line"><span class="comment"># 选取整列；</span></span><br><span class="line">&gt; A[,5]</span><br><span class="line">[1] 56 38 50 42 46</span><br><span class="line"><span class="comment"># 选取多行，注意：生成的新矩阵行号改变；</span></span><br><span class="line">&gt; A[c(3,4),]</span><br><span class="line">[,1] [,2] [,3] [,4] [,5]</span><br><span class="line">[1,]   50   50   40   32   50</span><br><span class="line">[2,]   34   56   49   36   42</span><br><span class="line"><span class="comment"># 选取多列，注意：生成的新矩阵列号改变；</span></span><br><span class="line">&gt; A[,c(1,3,5)]</span><br><span class="line">[,1] [,2] [,3]</span><br><span class="line">[1,]   43   54   56</span><br><span class="line">[2,]   56   37   38</span><br><span class="line">[3,]   50   40   50</span><br><span class="line">[4,]   34   49   42</span><br><span class="line">[5,]   56   33   46</span><br><span class="line"><span class="comment"># 更改矩阵B的行名与列名；</span></span><br><span class="line">&gt; dimnames(B)=list(c(<span class="string">"R1"</span>,<span class="string">"R2"</span>,<span class="string">"R3"</span>,<span class="string">"R4"</span>,<span class="string">"R5"</span>),c(<span class="string">"C1"</span>,<span class="string">"C2"</span>,<span class="string">"C3"</span>,<span class="string">"C4"</span>,<span class="string">"C5"</span>))</span><br><span class="line">&gt; B</span><br><span class="line">C1 C2 C3 C4 C5</span><br><span class="line">R1 18 21 23  1 18</span><br><span class="line">R2 18  5 23 10  5</span><br><span class="line">R3 26  6 26  8 26</span><br><span class="line">R4  7  5  7 16 15</span><br><span class="line">R5 29 20  1 15  2</span><br><span class="line"><span class="comment"># 对矩阵的行和列进行命名后，可以通过行名与列名操作矩阵；</span></span><br><span class="line"><span class="comment"># 选取单个元素；</span></span><br><span class="line">&gt; B[<span class="string">"R4"</span>,<span class="string">"C5"</span>]</span><br><span class="line">[1] 15</span><br><span class="line"><span class="comment"># 选取整行；</span></span><br><span class="line">&gt; B[<span class="string">"R3"</span>,]</span><br><span class="line">C1 C2 C3 C4 C5 </span><br><span class="line">26  6 26  8 26</span><br><span class="line"><span class="comment"># 选取整列；</span></span><br><span class="line">&gt; B[,<span class="string">"C2"</span>]</span><br><span class="line">R1 R2 R3 R4 R5 </span><br><span class="line">21  5  6  5 20</span><br><span class="line"><span class="comment"># 选取多行；</span></span><br><span class="line">&gt; B[c(<span class="string">"R1"</span>,<span class="string">"R2"</span>,<span class="string">"R4"</span>),]</span><br><span class="line">C1 C2 C3 C4 C5</span><br><span class="line">R1 18 21 23  1 18</span><br><span class="line">R2 18  5 23 10  5</span><br><span class="line">R4  7  5  7 16 15</span><br><span class="line"><span class="comment"># 选取多列；</span></span><br><span class="line">&gt; B[,c(<span class="string">"C3"</span>,<span class="string">"C5"</span>)]</span><br><span class="line">C3 C5</span><br><span class="line">R1 23 18</span><br><span class="line">R2 23  5</span><br><span class="line">R3 26 26</span><br><span class="line">R4  7 15</span><br><span class="line">R5  1  2</span><br><span class="line"><span class="comment"># 对矩阵C进行行列转置(transpose)；</span></span><br><span class="line">&gt; G &lt;- t(C)</span><br><span class="line">&gt; G</span><br><span class="line">[,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span><br><span class="line">[1,]   43   56   50   34   56   18   18   26    7    29</span><br><span class="line">[2,]   32   45   50   56   41   21    5    6    5    20</span><br><span class="line">[3,]   54   37   40   49   33   23   23   26    7     1</span><br><span class="line">[4,]   41   57   32   36   40    1   10    8   16    15</span><br><span class="line">[5,]   56   38   50   42   46   18    5   26   15     2</span><br><span class="line"><span class="comment"># 解构矩阵(Deconstruction);</span></span><br><span class="line">&gt;H &lt;- c(D)</span><br><span class="line">&gt; H</span><br><span class="line">[1] 18 18 26  7 29 43 56 50 34 56 21  5  6  5 20 32 45 50 56 41 23 23 26  7  1</span><br><span class="line">[26] 54 37 40 49 33  1 10  8 16 15 41 57 32 36 40 18  5 26 15  2 56 38 50 42 46</span><br><span class="line"><span class="comment"># 解构之后就不是矩阵了；</span></span><br><span class="line">&gt; class(D)</span><br><span class="line">[1] <span class="string">"matrix"</span></span><br><span class="line">&gt; class(H)</span><br><span class="line">[1] <span class="string">"integer"</span></span><br><span class="line"><span class="comment"># 转换矩阵E为数据框；</span></span><br><span class="line">I &lt;- as.data.frame(E)</span><br><span class="line">&gt; I &lt;- as.data.frame(E)</span><br><span class="line">&gt; I</span><br><span class="line">V1 V2 V3 V4 V5 V6 V7 V8 V9 V10</span><br><span class="line">1 43 32 54 41 56 18 21 23  1  18</span><br><span class="line">2 56 45 37 57 38 18  5 23 10   5</span><br><span class="line">3 50 50 40 32 50 26  6 26  8  26</span><br><span class="line">4 34 56 49 36 42  7  5  7 16  15</span><br><span class="line">5 56 41 33 40 46 29 20  1 15   2</span><br><span class="line"><span class="comment"># 先看看E的数据类型；</span></span><br><span class="line">&gt; class(E)</span><br><span class="line">[1] <span class="string">"matrix"</span></span><br><span class="line">&gt; mode(E)</span><br><span class="line">[1] <span class="string">"numeric"</span></span><br><span class="line">&gt; typeof(E)</span><br><span class="line">[1] <span class="string">"integer"</span></span><br><span class="line"><span class="comment"># 再看一下I，转变成数据框；</span></span><br><span class="line">&gt; class(I)</span><br><span class="line">[1] <span class="string">"data.frame"</span></span><br><span class="line">&gt; mode(I)</span><br><span class="line">[1] <span class="string">"list"</span></span><br><span class="line">&gt; typeof(I)</span><br><span class="line">[1] <span class="string">"list"</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;一、创建矩阵&quot;&gt;&lt;a href=&quot;#一、创建矩阵&quot; class=&quot;headerlink&quot; title=&quot;一、创建矩阵&quot;&gt;&lt;/a&gt;一、创建矩阵&lt;/h1&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutt
      
    
    </summary>
    
      <category term="编程语言" scheme="http://uteric.github.io/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="R语言" scheme="http://uteric.github.io/tags/R%E8%AF%AD%E8%A8%80/"/>
    
  </entry>
  
  <entry>
    <title>R语言学习笔记-数据框与矩阵的区别</title>
    <link href="http://uteric.github.io/R/R%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E6%8D%AE%E6%A1%86%E4%B8%8E%E7%9F%A9%E9%98%B5%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <id>http://uteric.github.io/R/R语言学习笔记-数据框与矩阵的区别/</id>
    <published>2020-02-07T02:57:54.000Z</published>
    <updated>2020-02-07T02:57:54.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、数据框-data-frame"><a href="#一、数据框-data-frame" class="headerlink" title="一、数据框(data.frame)"></a>一、数据框(data.frame)</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt; var1=c(1,2,3,4,5,6)</span><br><span class="line">&gt; var2=LETTERS[1:6]</span><br><span class="line">&gt; var3=c(7,8,9,10,11,12)</span><br><span class="line"></span><br><span class="line">&gt; data &lt;- data.frame (var1,var2,var3)</span><br><span class="line">&gt; data</span><br><span class="line">var1 var2 var3</span><br><span class="line">1    1    A    7</span><br><span class="line">2    2    B    8</span><br><span class="line">3    3    C    9</span><br><span class="line">4    4    D   10</span><br><span class="line">5    5    E   11</span><br><span class="line">6    6    F   12</span><br><span class="line"><span class="comment"># 数据框可以由一系列变量组成，每个变量作为数据框的一列，列名即变量名，变量可以是数字，或字符串，或其他类型；</span></span><br></pre></td></tr></table></figure><h1 id="二、矩阵-Matrix"><a href="#二、矩阵-Matrix" class="headerlink" title="二、矩阵(Matrix)"></a>二、矩阵(Matrix)</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&gt; data &lt;- matrix(var1) <span class="comment"># 以var1为数据源创建矩阵，结果是6行1列，与matrix(var1,nrow=6,ncol=1相同；</span></span><br><span class="line">&gt; data</span><br><span class="line">[,1]</span><br><span class="line">[1,]    1</span><br><span class="line">[2,]    2</span><br><span class="line">[3,]    3</span><br><span class="line">[4,]    4</span><br><span class="line">[5,]    5</span><br><span class="line">[6,]    6</span><br><span class="line"></span><br><span class="line">&gt; data &lt;- matrix(var1,nrow=1,ncol=6) <span class="comment"># 1行6列</span></span><br><span class="line">&gt; data</span><br><span class="line">[,1] [,2] [,3] [,4] [,5] [,6]</span><br><span class="line">[1,]    1    2    3    4    5    6</span><br><span class="line"></span><br><span class="line">&gt; data &lt;- matrix(var1,nrow=2,ncol=3) <span class="comment"># 2行3列</span></span><br><span class="line">&gt; data</span><br><span class="line">[,1] [,2] [,3]</span><br><span class="line">[1,]    1    3    5</span><br><span class="line">[2,]    2    4    6</span><br><span class="line"></span><br><span class="line">&gt; data &lt;- matrix(var1,nrow=3,ncol=2) <span class="comment"># 3行2列</span></span><br><span class="line">&gt; data</span><br><span class="line">[,1] [,2]</span><br><span class="line">[1,]    1    4</span><br><span class="line">[2,]    2    5</span><br><span class="line">[3,]    3    6</span><br><span class="line"></span><br><span class="line">&gt; data &lt;- matrix(var1,nrow=2,ncol=2) <span class="comment"># 若矩阵中的元素少于数据源，则会将剩余的部分舍去；</span></span><br><span class="line">&gt; data</span><br><span class="line">[,1] [,2]</span><br><span class="line">[1,]    1    3</span><br><span class="line">[2,]    2    4</span><br><span class="line"></span><br><span class="line">&gt; data &lt;- matrix(var1,nrow=2,ncol=4) <span class="comment"># 若矩阵中的元素多于数据源，则会报错；</span></span><br><span class="line">Warning message:</span><br><span class="line">In matrix(var1, nrow = 2, ncol = 4) :</span><br><span class="line">data length [6] is not a sub-multiple or multiple of the number of columns [4]</span><br><span class="line"></span><br><span class="line">&gt; data &lt;- matrix(var2) <span class="comment"># 字符串也可以作为矩阵元素；</span></span><br><span class="line">&gt; data</span><br><span class="line">[,1]</span><br><span class="line">[1,] <span class="string">"A"</span> </span><br><span class="line">[2,] <span class="string">"B"</span> </span><br><span class="line">[3,] <span class="string">"C"</span> </span><br><span class="line">[4,] <span class="string">"D"</span> </span><br><span class="line">[5,] <span class="string">"E"</span> </span><br><span class="line">[6,] <span class="string">"F"</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;一、数据框-data-frame&quot;&gt;&lt;a href=&quot;#一、数据框-data-frame&quot; class=&quot;headerlink&quot; title=&quot;一、数据框(data.frame)&quot;&gt;&lt;/a&gt;一、数据框(data.frame)&lt;/h1&gt;&lt;figure class=&quot;
      
    
    </summary>
    
      <category term="编程语言" scheme="http://uteric.github.io/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="R语言" scheme="http://uteric.github.io/tags/R%E8%AF%AD%E8%A8%80/"/>
    
  </entry>
  
  <entry>
    <title>GEO数据库测序数据下载位置变更</title>
    <link href="http://uteric.github.io/RNASEQ/GEO%20FTP%20address%20change/"/>
    <id>http://uteric.github.io/RNASEQ/GEO FTP address change/</id>
    <published>2019-12-29T00:08:45.000Z</published>
    <updated>2019-12-29T00:08:45.000Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.ncbi.nlm.nih.gov/geo/" target="_blank" rel="noopener">GEO</a>是一个公共基因数据库，包含绝大多数已发表文章的原始测序数据，在学习测序数据分析时，我们需要从GEO数据库来下载原始测序文件。</p><p>去年我在学习RNA测序分析时，写了几篇RNASEQ分析入门笔记，最近，当我再打开时，发现之前提到的SRA测序文件下载地址发生了变动，因此，特别写下这篇小小笔记以方便初学RNASEQ的朋友们少走弯路。</p><p>在这篇笔记<a href="https://uteric.github.io/RNASEQ%E4%B8%8B%E8%BD%BD%E5%8E%9F%E5%A7%8B%E6%95%B0%E6%8D%AE/">RNASEQ分析入门笔记2-下载原始数据</a>中，[SRR3589959]的下载地址原本是：<a href="ftp://ftp-trace.ncbi.nlm.nih.gov/sra/sra-instant/reads/ByStudy/sra/SRP/SRP075/SRP075747/SRR3589959/SRR3589959.sra，但是，现在这个地址已经打不开了，我仔细查看了FTP文件目录，发现FTP地址发生了变化，但仍然很有规律，可以分为如下两个部分：" target="_blank" rel="noopener">ftp://ftp-trace.ncbi.nlm.nih.gov/sra/sra-instant/reads/ByStudy/sra/SRP/SRP075/SRP075747/SRR3589959/SRR3589959.sra，但是，现在这个地址已经打不开了，我仔细查看了FTP文件目录，发现FTP地址发生了变化，但仍然很有规律，可以分为如下两个部分：</a></p><p>1）通用部分：<a href="ftp://ftp.ncbi.nlm.nih.gov/sra/sra-instant/reads/ByRun/sra/SRR/" target="_blank" rel="noopener">ftp://ftp.ncbi.nlm.nih.gov/sra/sra-instant/reads/ByRun/sra/SRR/</a><br>2）变动部分：SRR358/SRR3589959/SRR3589959.sra #格式为SRRabc/SRRabcdef/SRRabcdef.sra</p><p>因此，SRR3589959.sra的地址即为：<a href="ftp://ftp.ncbi.nlm.nih.gov/sra/sra-instant/reads/ByRun/sra/SRR/SRR358/SRR3589959/SRR3589959.sra" target="_blank" rel="noopener">ftp://ftp.ncbi.nlm.nih.gov/sra/sra-instant/reads/ByRun/sra/SRR/SRR358/SRR3589959/SRR3589959.sra</a></p><p>对于数据下载，使用wget命令即可，</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -c ftp://ftp.ncbi.nlm.nih.gov/sra/sra-instant/reads/ByRun/sra/SRR/SRR358/SRR3589959/SRR3589959.sra # -c表示断点续传，以防意外情况导致下载失败</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://www.ncbi.nlm.nih.gov/geo/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;GEO&lt;/a&gt;是一个公共基因数据库，包含绝大多数已发表文章的原始测序数据，在学习测序数据分析时，我们需要从GEO数据库来下载
      
    
    </summary>
    
      <category term="编程语言" scheme="http://uteric.github.io/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="GEO" scheme="http://uteric.github.io/tags/GEO/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu系统安装JAVA</title>
    <link href="http://uteric.github.io/Linux/Ubuntu%20Java%20Install/"/>
    <id>http://uteric.github.io/Linux/Ubuntu Java Install/</id>
    <published>2019-12-29T00:08:40.000Z</published>
    <updated>2019-12-29T00:08:40.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1、安装系统默认的JAVA"><a href="#1、安装系统默认的JAVA" class="headerlink" title="1、安装系统默认的JAVA"></a>1、安装系统默认的JAVA</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install default-jdk</span><br></pre></td></tr></table></figure><h2 id="2、安装JAVA11或JAVA13"><a href="#2、安装JAVA11或JAVA13" class="headerlink" title="2、安装JAVA11或JAVA13"></a>2、安装JAVA11或JAVA13</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">add-apt-repository ppa:linuxuprising/java</span><br><span class="line">apt-get update</span><br><span class="line">apt-get install oracle-java11-installer</span><br><span class="line">apt-get install oracle-java13-installer</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;1、安装系统默认的JAVA&quot;&gt;&lt;a href=&quot;#1、安装系统默认的JAVA&quot; class=&quot;headerlink&quot; title=&quot;1、安装系统默认的JAVA&quot;&gt;&lt;/a&gt;1、安装系统默认的JAVA&lt;/h2&gt;&lt;figure class=&quot;highlight plai
      
    
    </summary>
    
      <category term="编程语言" scheme="http://uteric.github.io/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="JAVA" scheme="http://uteric.github.io/tags/JAVA/"/>
    
  </entry>
  
  <entry>
    <title>使用youtube-dl命令下载youtube视频与音频</title>
    <link href="http://uteric.github.io/Linux/Youtube%20dl/"/>
    <id>http://uteric.github.io/Linux/Youtube dl/</id>
    <published>2019-12-29T00:08:35.000Z</published>
    <updated>2019-12-29T00:08:35.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1、安装youtube-dl"><a href="#1、安装youtube-dl" class="headerlink" title="1、安装youtube-dl"></a>1、安装youtube-dl</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo wget https://yt-dl.org/downloads/latest/youtube-dl -O /usr/local/bin/youtube-dl</span><br><span class="line">sudo chmod a+rx /usr/local/bin/youtube-dl</span><br><span class="line">hash -r</span><br></pre></td></tr></table></figure><p>现在，你可以使用如下命令来将youtube-dl更新到最新版本：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo youtube-dl -U # 版本更新</span><br><span class="line">youtube-dl --version # 检查版本</span><br></pre></td></tr></table></figure><p>如果你之前使用apt命令安装youtube-dl但无法正常使用，请使用如下命令卸载并重新安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove -y youtube-dl</span><br></pre></td></tr></table></figure><h2 id="2、获取视频与音频信息"><a href="#2、获取视频与音频信息" class="headerlink" title="2、获取视频与音频信息"></a>2、获取视频与音频信息</h2><p>以Jingle Bells这首儿歌为例，</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">youtube-dl -F https://www.youtube.com/watch?v=eQ34DSTjsLQ</span><br></pre></td></tr></table></figure><p>返回如下信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[youtube] eQ34DSTjsLQ: Downloading webpage</span><br><span class="line">[youtube] eQ34DSTjsLQ: Downloading video info webpage</span><br><span class="line">[info] Available formats for eQ34DSTjsLQ:</span><br><span class="line">format code  extension  resolution note</span><br><span class="line">249          webm       audio only tiny   83k , opus @ 50k (48000Hz), 1.48MiB</span><br><span class="line">250          webm       audio only tiny  104k , opus @ 70k (48000Hz), 1.87MiB</span><br><span class="line">140          m4a        audio only tiny  130k , m4a_dash container, mp4a.40.2@128k (44100Hz), 2.93MiB</span><br><span class="line">251          webm       audio only tiny  178k , opus @160k (48000Hz), 3.46MiB</span><br><span class="line">394          mp4        256x144    144p   80k , av01.0.00M.08, 24fps, video only, 1.64MiB</span><br><span class="line">278          webm       256x144    144p   97k , webm container, vp9, 24fps, video only, 2.08MiB</span><br><span class="line">160          mp4        256x144    144p  109k , avc1.4d400c, 24fps, video only, 2.08MiB</span><br><span class="line">395          mp4        426x240    240p  168k , av01.0.00M.08, 24fps, video only, 3.19MiB</span><br><span class="line">242          webm       426x240    240p  222k , vp9, 24fps, video only, 4.24MiB</span><br><span class="line">133          mp4        426x240    240p  292k , avc1.4d4015, 24fps, video only, 4.61MiB</span><br><span class="line">396          mp4        640x360    360p  299k , av01.0.01M.08, 24fps, video only, 5.49MiB</span><br><span class="line">243          webm       640x360    360p  408k , vp9, 24fps, video only, 7.19MiB</span><br><span class="line">397          mp4        854x480    480p  515k , av01.0.04M.08, 24fps, video only, 9.39MiB</span><br><span class="line">134          mp4        640x360    360p  528k , avc1.4d401e, 24fps, video only, 8.33MiB</span><br><span class="line">244          webm       854x480    480p  751k , vp9, 24fps, video only, 10.84MiB</span><br><span class="line">135          mp4        854x480    480p  800k , avc1.4d401e, 24fps, video only, 11.53MiB</span><br><span class="line">398          mp4        1280x720   720p 1044k , av01.0.05M.08, 24fps, video only, 19.72MiB</span><br><span class="line">136          mp4        1280x720   720p 1098k , avc1.4d401f, 24fps, video only, 16.32MiB</span><br><span class="line">247          webm       1280x720   720p 1297k , vp9, 24fps, video only, 18.38MiB</span><br><span class="line">18           mp4        640x360    360p  667k , avc1.42001E, mp4a.40.2@ 96k (44100Hz), 15.09MiB (best)</span><br></pre></td></tr></table></figure><p>每个视频或音频前都有一个编号，如140代表m4a音频，18代表mp4视频等，现在，可以开始下载了。</p><h2 id="3、下载视频或音频"><a href="#3、下载视频或音频" class="headerlink" title="3、下载视频或音频"></a>3、下载视频或音频</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">youtube-dl -f 140 https://www.youtube.com/watch?v=eQ34DSTjsLQ # 下载m4a音频</span><br><span class="line">youtube-dl -f 18 https://www.youtube.com/watch?v=eQ34DSTjsLQ # 下载mp4视频</span><br></pre></td></tr></table></figure><p>OK，all done!</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;1、安装youtube-dl&quot;&gt;&lt;a href=&quot;#1、安装youtube-dl&quot; class=&quot;headerlink&quot; title=&quot;1、安装youtube-dl&quot;&gt;&lt;/a&gt;1、安装youtube-dl&lt;/h2&gt;&lt;figure class=&quot;highlight 
      
    
    </summary>
    
      <category term="编程语言" scheme="http://uteric.github.io/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="YouTube" scheme="http://uteric.github.io/tags/YouTube/"/>
    
  </entry>
  
  <entry>
    <title>免ROOT在小米盒子上看YouTube</title>
    <link href="http://uteric.github.io/Linux/Youtube%20install/"/>
    <id>http://uteric.github.io/Linux/Youtube install/</id>
    <published>2019-12-29T00:08:29.000Z</published>
    <updated>2019-12-29T00:08:29.000Z</updated>
    
    <content type="html"><![CDATA[<p>最近，小米盒子上的youtube软件打开时总显示“不允许执行此操作”，于是，不得不重新安装youtube软件。</p><p>下面这个方法适合不想ROOT的用户，更不需要安装GOOGLE服务框架。</p><p>需要下载<a href="https://smartyoutubetv.github.io/" target="_blank" rel="noopener">SmartyouTube TV</a>，下载后通过U盘安装到小米盒子。</p><p>安装完成后，打开，选择第一项，然后在手机或者电脑上登录Youtube.com/activate，输入电视上显示的密码，即可用谷歌账号登录YouTube。</p><p>这个方法同样也适用于安装YouTube Kids，控制孩子看电视的时间。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;最近，小米盒子上的youtube软件打开时总显示“不允许执行此操作”，于是，不得不重新安装youtube软件。&lt;/p&gt;
&lt;p&gt;下面这个方法适合不想ROOT的用户，更不需要安装GOOGLE服务框架。&lt;/p&gt;
&lt;p&gt;需要下载&lt;a href=&quot;https://smartyoutu
      
    
    </summary>
    
      <category term="美国生活" scheme="http://uteric.github.io/categories/%E7%BE%8E%E5%9B%BD%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="YouTube" scheme="http://uteric.github.io/tags/YouTube/"/>
    
  </entry>
  
  <entry>
    <title>TUNA的镜像源</title>
    <link href="http://uteric.github.io/Linux/Tuna%E6%BA%90/"/>
    <id>http://uteric.github.io/Linux/Tuna源/</id>
    <published>2019-12-25T17:21:27.000Z</published>
    <updated>2019-12-25T17:21:27.000Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line"></span><br><span class="line"># 预发布软件源，不建议启用</span><br><span class="line"># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class
      
    
    </summary>
    
      <category term="编程语言" scheme="http://uteric.github.io/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="Ubuntu" scheme="http://uteric.github.io/tags/Ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>编辑sources.list</title>
    <link href="http://uteric.github.io/Linux/Source%20List/"/>
    <id>http://uteric.github.io/Linux/Source List/</id>
    <published>2019-12-25T17:21:23.000Z</published>
    <updated>2019-12-25T17:21:23.000Z</updated>
    
    <content type="html"><![CDATA[<p>Ubuntu 的软件源配置文件是 /etc/apt/sources.list，进行修改之前建议将系统自带的该文件做个备份，执行如下命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak</span><br></pre></td></tr></table></figure><p>打开并编辑</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/apt/sources.list</span><br><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Ubuntu 的软件源配置文件是 /etc/apt/sources.list，进行修改之前建议将系统自带的该文件做个备份，执行如下命令：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;p
      
    
    </summary>
    
      <category term="编程语言" scheme="http://uteric.github.io/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="Ubuntu" scheme="http://uteric.github.io/tags/Ubuntu/"/>
    
  </entry>
  
</feed>
